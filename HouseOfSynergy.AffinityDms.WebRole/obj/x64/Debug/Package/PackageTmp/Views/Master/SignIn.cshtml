@model HouseOfSynergy.AffinityDms.WebRole.Models.Common.SignInViewModel

@using HouseOfSynergy.AffinityDms.ResourceProvider
@using HouseOfSynergy.AffinityDms.Library

@{
	this.Layout = "~/Views/Shared/_LayoutMasterPublic.cshtml";
	this.ViewBag.Title = ResourceManagement.DesktopClient_ProductName + " - Sign In";
}

<script src="~/Scripts/StanfordJavascriptCryptoLibrary.js"></script>

@using (Html.BeginForm("SignIn", "MasterSignIn", FormMethod.Post))
{
	@Html.AntiForgeryToken()

	<div id="DivSignIn">

		@Html.ValidationSummary(true, "")

		<table style="margin: auto; width: 300px;">
			<tr>
				<td>
					Domain
				</td>
			</tr>
			<tr>
				<td>
					<input id="TextBoxDomain"
						   name="Domain"
						   type="text"
						   value="@this.Model.Domain"
						   placeholder="Enter your domain."
						   autofocus
						   autocomplete="on"
						   onblur="HouseOfSynergy.Library.Validation.ValidationUtilities.ValidateDomain(this.value).Message" />
				</td>
			</tr>
			<tr>
				<td>
					<span id="SpanErrorDomain" class="SpanError"></span>
				</td>
			</tr>
			<tr>
				<td>
					&nbsp;
				</td>
			</tr>
			<tr>
				<td>
					Username
				</td>
			</tr>
			<tr>
				<td>
					<input id="TextBoxUsername"
						   name="UserName"
						   type="text"
						   value="@this.Model.UserName"
						   placeholder="Enter your username."
						   autocomplete="on"
						   onblur="HouseOfSynergy.Library.Validation.ValidationUtilities.ValidateUsername(this.value).Message" />
				</td>
			</tr>
			<tr>
				<td>
					<span id="SpanErrorUsername" class="SpanError"></span>
				</td>
			</tr>
			<tr>
				<td>
					&nbsp;
				</td>
			</tr>
			<tr>
				<td style="width: 100px;">
					Password
				</td>
			</tr>
			<tr>
				<td>
					<input id="TextBoxPassword"
						   name="Password"
						   type="password"
						   value="@(AffinityConfiguration.IsConfigurationDebug ? this.Model.Password : "")"
						   placeholder="Enter your password."
						   onblur="HouseOfSynergy.Library.Validation.ValidationUtilities.ValidatePassword(this.value).Message" />
				</td>
			</tr>
			<tr>
				<td>
					<span id="SpanErrorPassword" class="SpanError"></span>
				</td>
			</tr>
			<tr>
				<td>
					&nbsp;
				</td>
			</tr>
			<tr>
				<td>
					<input id="CheckBoxRememberMe" name="CheckBoxRememberMe" type="checkbox" title="Remember me" value="RememberMe" />
					<label for="CheckBoxRememberMe">Remember me</label>
				</td>
			</tr>
			<tr>
				<td>
					&nbsp;
				</td>
			</tr>
			<tr>
				<td>
					<input id="ButtonSignIn" type="submit" value="Sign In" onclick="return (Validate());" />
				</td>
			</tr>
		</table>

	</div>
}

<script type="text/javascript">

	$(document).ready
	(
		function ()
		{
			$("TextBoxDomain").focus().select();
		}
	);

	function Validate()
	{
		var result = true;
		var validationResult = HouseOfSynergy.Library.Validation.ValidationResult.Empty;

		validationResult = HouseOfSynergy.Library.Validation.ValidationUtilities.ValidateDomain(window.TextBoxDomain.value);
		if (!validationResult.Validated) { result = false; window.SpanErrorDomain.innerText = validationResult.Message; }
		validationResult = HouseOfSynergy.Library.Validation.ValidationUtilities.ValidateUsername(window.TextBoxUsername.value);
		if (!validationResult.Validated) { result = false; window.SpanErrorUsername.innerText = validationResult.Message; }
		validationResult = HouseOfSynergy.Library.Validation.ValidationUtilities.ValidatePassword(window.TextBoxPassword.value);
		if (!validationResult.Validated) { result = false; window.SpanErrorPassword.innerText = validationResult.Message; }

		return (result);
	}

</script>