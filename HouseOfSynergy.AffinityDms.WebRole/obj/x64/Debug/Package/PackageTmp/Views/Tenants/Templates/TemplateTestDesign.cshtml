@model HouseOfSynergy.AffinityDms.WebRole.Models.Tenants.TemplateElementListAndElementDetailListViewModel

@{
    ViewBag.Title = "Template Test Design";
    this.Layout = "~/Views/Shared/_LayoutTenantThemePrivate.cshtml";
}

<h2>Template Design</h2>
<style>


/*.ui-resizable {
  position: relative;
  border: 3px solid red;
 
}

.ui-resizable-handle {
  position: absolute;
  font-size: 0.1px;
  z-index: 99999;
  display: block;
}

.ui-resizable-disabled .ui-resizable-handle,
.ui-resizable-autohide .ui-resizable-handle {
  display: none;
}

.ui-resizable-n {
  cursor: n-resize;
  background-color: yellow;
  border: 2px solid red;
  height: 12px;
  width: 12px;
  top: -6px;
  left: 44%;
}

.ui-resizable-s {
  cursor: s-resize;
  background-color: yellow;
  border: 2px solid red;
  height: 12px;
  width: 12px;
  bottom: -6px;
  left: 44%;
}

.ui-resizable-e {
  cursor: e-resize;
  background-color: yellow;
   border: 2px solid red;
  height: 12px;
  width: 12px;
  top: 45%;
  right: -6px;
}

.ui-resizable-w {
  cursor: w-resize;
  background-color: yellow;
 border: 2px solid red;
  height: 12px;
  width: 12px;
  top: 45%;
  left: -6px
}

.ui-resizable-se {
  cursor: se-resize;
  background-color: yellow;
 border: 2px solid red;
  height: 12px;
  width: 12px;
  right: -6px;
  bottom: -6px;
}

.ui-resizable-sw {
  cursor: sw-resize;
  background-color: yellow;
 border: 2px solid red;
  height: 12px;
  width: 12px;
  left: -6px;
  bottom: -6px;
}

.ui-resizable-nw {
  cursor: nw-resize;
  background-color: yellow;
  border: 2px solid red;
  height: 12px;
  width: 12px;
  left: -6px;
  top: -6px;
}
.ui-resizable-ne {
  cursor: ne-resize;
  background-color: yellow;
 border: 2px solid red;
  height: 12px;
  width: 12px;
  right: -6px;
  top: -6px;
}
.sortingPlace {
    border: 1px solid green;
    -webkit-box-shadow: 0px 0px 10px #888;
    -moz-box-shadow: 0px 0px 10px #888;
    box-shadow: 0px 0px 10px #888;
}*/


</style>
@Scripts.Render("~/bundles/TypeScript")
<div class="col-md-12" style="margin-bottom: 10px;margin-left: 15px;margin-top: 10px;">
    <div style="display:inline-block" class="col-md-12">
        <div style="padding-top:10px !important;display: inline-block;">
            @{

                <div class="col-md-12">
                    <div style="float:right;margin:10px;display:inline-flex">
                        <div>
                            <label>Version Major</label>
                            <input type="text" class="form-control text-box" id="VMajor" value="@Model.template.VersionMajor" name="VMajor" style="width:120px;display: inline !important;margin-right:5px">
                        </div>
                        <div>
                            <label>Version Minor</label>
                            <input type="text" class="form-control text-box" id="VMinor" value="@Model.template.VersionMinor" name="VMinor" style="width:120px;display: inline !important;margin-right:5px">
                        </div>
                        <input type="button" class="btn btn-primary" value="Submit Version" style="margin-right:5px" onclick="javascript: designer.onVersionSubmit(event);">

                        @if (!Model.template.IsFinalized)
                        {
                            <input type="button" class="btn btn-primary" value="Cancel Checkout" style="margin-right:5px" onclick="javascript: window.location.href = '@Url.Action("CancelCheckout", "TenantTemplateDesign", new { id=Model.template.Id})'">
                            <input type="button" class="btn btn-primary" value="Check In" id="btnCheckin" style="margin-right:5px" onclick="javascript: designer.onCheckin(event);">
                        }
                        @if (Model.template.IsActive)
                        {
                            <input type="button" class="btn btn-danger" value="Inactive" id="btnInactive" style="margin-right:5px" onclick="javascript: designer.ActiveInactive(event);">
                            <input type="button" class="btn btn-primary" value="Active" id="btnActive" style="margin-right:5px;display:none" onclick="javascript: designer.ActiveInactive(event);">

                        }
                        else
                        {
                            <input type="button" class="btn btn-danger" value="Inactive" id="btnInactive" style="margin-right:5px;display:none" onclick="javascript: designer.ActiveInactive(event);">
                            <input type="button" class="btn btn-primary" value="Active" id="btnActive" style="margin-right:5px" onclick="javascript: designer.ActiveInactive(event);">
                        }
                        <input type="button" class="btn btn-primary" value="Save Template" onclick="javascript: designer.onSubmitForm(event);">
                    </div>
                </div>
                var id = ViewBag.Id;
                if (id != null)
                {
                    <input type="hidden" value="@ViewBag.Id" id="H_Templateid">
                }
            }
        </div>
    </div>

</div>
<script type="text/javascript">
    var designer = new AffinityDms.Entities.FormTestDesigner();
</script>
<div id="DivBody" style="width:100%;display: inline-flex; height:1500px;overflow-y:scroll !important;overflow-x:hidden !important">

    <div id="DivToolBox" style="display: inline-block;  left: 1%;margin-left: 30px;top: 5%; width: 6%; height: 100%; background-color: steelblue;float:left">
        <div>
            <img src="~/Images/TableZone.png" id="DivToolOcrTableZone" title="Table Zone" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" draggable="true" ondragstart="javascript:designer.OnDragStart(event);">
            <img src="~/Images/TextZone.png" id="DivToolOcrRectangleZone" title="Text Zone" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" draggable="true" ondragstart="javascript:designer.OnDragStart(event);">
            @*<img id="SubmitForm" src="~/Images/Save.png" title="Save" style="width:30px;height:30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: designer.onSubmitForm(event);" />*@
            <img id="addfitdivid" src="~/Images/Fit-to-Screen.png" title="Fit to screen" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: designer.FitDiv(event)">
            <img id="addzoomoutbtndivid" src="~/Images/Zoom-Out.png" title="Zoom Out" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: designer.ZoomOutDiv(event)">
            <img id="addzoominbtndivid" src="~/Images/Zoom-In.png" title="Zoom In" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: designer.ZoomInDiv(event)">
        </div>
        <input type="hidden" id="colcounter" value="0" />
        <input type="hidden" id="divcounter" value="0" />
        <input type="hidden" id="Hidfind" value="0" />
        <input type="hidden" id="CurTarget" value="0" />
        <input type="hidden" id="TempType" value="Template">
        <input type="hidden" id="ImageMove" value="false">
    </div>

    @{

        if (ViewBag.ModelTemplateImage != null)
        {
            var img = (System.Drawing.Image)ViewBag.ModelTemplateImage;
            byte[] imgbytearray = ViewBag.ModelTemplateImageByteArray;
            string imageBase64Data = Convert.ToBase64String(imgbytearray);
            string imageDataURL = string.Format("data:image/png;base64,{0}", imageBase64Data);
            if (img.Size.Width > 0)
            {
                <div id="MainContainer" class="col-md-8" style="overflow: auto;padding:0px!important; width: 750px;height: 510px;background-color:grey;background-repeat: no-repeat;background-size: cover;position: relative !important;display: inline-block;">
                    <div id="ElementsContainer" style="zoom:1;transform:scale(1);transform-origin:left top;width: 550px;height: 550px;">
                        <div id="DivPage" style="z-index:500">
                        </div>
                        <img src="@imageDataURL" draggable="false" id="TemplateImage" width="@img.Size.Width.ToString()px" height="@img.Size.Height.ToString()px" style="z-index:3;position: relative;" ondragover="javascript: designer.OnDragOver(event);" ondrop="javascript: designer.OnDrop(event);" onmousewheel="javascript: designer.OnDivMouseWheel(event)" onmousedown="javascript: designer.OnDivImageMouseDown(event)" />
                    </div>
                </div>
            }
        }
    }

    <div id="DivPropertiesBox" style="display:inline-block;margin-left: 30px;top:5%;width:200px; height:100%; background-color: steelblue;float:right;z-index:1500">
        <div style="margin-left: 7px; margin-top: 10px;margin-right: auto">
            <div id="addnamedivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Name:</label>
                <input type="text" placeholder="Name" id="addnameid" class="PropertyElement" onkeyup="javascript: designer.AddName(event)">
            </div>

            <div id="addindexradiodivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">  <input type="radio" data-radiofor="Label" name="elementindexes" id="addindexradioid" onchange="javascript: designer.ChangeIndexValueType(event)"> Index Type:</label>
            </div>
            <div id="addindexlabeldivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Value:</label>
                <input type="text" placeholder="Value" id="addindexlabelid" class="PropertyElement" onkeyup="javascript: designer.AddValue(event)">
            </div>

            <div id="addindexdatatyperadiodivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">  <input type="radio" data-radiofor="Value" name="elementindexes" id="addindexdatatyperadioid" onchange="javascript: designer.ChangeIndexValueType(event)"> Dynamic Data Type:</label>
            </div>
            <div id="addindexvaluedivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Value:</label>
                <select id="addindexvalueid" class="PropertyElement" onchange="javascript: designer.AddIndexDataTypeValue(event)">
                    <option id="-1" value="-1">Select a datatype</option>
                    @foreach (SelectListItem selectlistitem in this.ViewBag.DataTypeSelectListItem)
                    {
                        <option id="@selectlistitem.Value" value="@selectlistitem.Value">@selectlistitem.Text</option>
                    }
                </select>
            </div>

            <div id="adddescriptiondivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Description:</label>
                <input type="text" placeholder="Description" id="adddescriptionid" class="PropertyElement" onkeyup="javascript: designer.AddDescription(event)">
            </div>
            <div id="addtextdivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Text:</label>
                <input type="text" placeholder="Text" id="addtextid" class="PropertyElement" onkeyup="javascript: designer.AddText(event)">
            </div>
            <div id="fileuploader" style="display: block;margin: 10px;">

                <label class="PropertyLabel">Choose a File:</label>
                <input type="file" name="FileName" id="fileChooser" style="width: 100%;float: right;margin-right: 10px;" onchange="javascript: designer.OnFileSelected(event)">

            </div>


            <div id="addxdivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">X-Axis:</label>
                <input type="number" placeholder="X-Axis" id="addxid" class="PropertyElement" onchange="javascript: designer.AddX(event)" onkeyup="javascript: designer.AddX(event)">
            </div>
            <div id="addydivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Y-Axis:</label>
                <input type="number" placeholder="Y-Axis" id="addyid" class="PropertyElement" onchange="javascript: designer.AddY(event)" onkeyup="javascript: designer.AddY(event)">
            </div>
            <div id="addx2divid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">X2-Axis:</label>
                <input type="number" placeholder="X2-Axis" id="addx2id" class="PropertyElement" onchange="javascript: designer.AddColumnToOCRTableZone(event)" onkeyup="javascript: designer.AddColumnToOCRTableZone(event)">
            </div>
            <div id="addy2divid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Y2-Axis:</label>
                <input type="number" placeholder="Y2-Axis" id="addy2id" class="PropertyElement" onchange="javascript: designer.AddColumnToOCRTableZone(event)" onkeyup="javascript: designer.AddColumnToOCRTableZone(event)">
            </div>



            <div id="addmaxchardivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Max Length:</label>
                <input type="number" placeholder="Max Character" id="addmaxcharid" class="PropertyElement" onchange="javascript: designer.AddMaxChar(event)" onkeyup="javascript: designer.AddMaxChar(event)">
            </div>


            <div id="addfontsizedivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Font Size:</label>
                <input type="number" placeholder="FontSize" id="addfontsizeid" class="PropertyElement" onkeyup="javascript: designer.AddFontSize(event)" onchange="javascript: designer.AddFontSize(event)">
            </div>

            <div id="addwidthdivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Width:</label>
                <input type="number" placeholder="Width" id="addwidthid" class="PropertyElement" onkeyup="javascript: designer.AddWidth(event)" onchange="javascript: designer.AddWidth(event)">
            </div>
            <div id="addheightdivid" style="display: block;margin: 10px;">
                <label class="PropertyLabel">Height:</label>
                <input type="number" placeholder="Height" id="addheightid" class="PropertyElement" onkeyup="javascript: designer.AddHeight(event)" onchange="javascript: designer.AddHeight(event)">
            </div>


            <div id="addcolumndivid" style="display: block;margin: 10px;">
                @*<input type="button" value="Add Column" id="addcolumnid" style="width: auto;" onclick="javascript: designer.AddColumnToOCRTableZone(event)">*@
                <img id="addcolumnid" src="~/Images/AddColumn.png" title="Add Index" style="width:25px;margin-right: auto;margin-left:auto" onclick="javascript: designer.AddColumnToOCRTableZone(event)">
                <label class="PropertyLabel" onclick="javascript: designer.AddColumnToOCRTableZone(event)">Add Column</label>
            </div>
            <div id="adddeletecolumnbtndivid" style="display: block;margin: 10px;">
                @*<input type="button" value="Delete Column" id="adddeletecolumnbtnid" style="width: auto;" onclick="javascript: designer.DeleteColumnElement(event)">*@
                <img id="adddeletecolumnbtnid" src="~/Images/RemoveColumn.png" title="Remove Column" style="width:25px;margin-right: auto;margin-left:auto" onclick="javascript: designer.DeleteColumnElement(event)">
                <label class="PropertyLabel" onclick="javascript: designer.DeleteColumnElement(event)">Remove Column</label>
            </div>
            <div id="adddeletebtndivid" style="display: block;margin: 10px;">
                <img id="adddeletebtnid" src="~/Images/Delete.png" title="Delete Zone" style="width:25px;margin-right: auto;margin-left:auto" onclick="javascript: designer.DeleteElement(event)">
                <label class="PropertyLabel" onclick="javascript: designer.DeleteElement(event)">Delete Zone</label>
                @*<input type="button" value="Delete" id="adddeletebtnid" style="width: auto;" onclick="javascript: designer.DeleteElement(event)">*@
            </div>
        </div>

    </div>

</div>

@if (Model != null)
{
    <script type="text/javascript">
        @{
            System.Web.Script.Serialization.JavaScriptSerializer serialize = new System.Web.Script.Serialization.JavaScriptSerializer();
            serialize.MaxJsonLength = int.MaxValue;
            var serializeddata = serialize.Serialize(Model);
        }
        document.onload = designer.editTemplateDesign('@Html.Raw(serializeddata)');//Json.Encode(Model))');

    </script>
    }
