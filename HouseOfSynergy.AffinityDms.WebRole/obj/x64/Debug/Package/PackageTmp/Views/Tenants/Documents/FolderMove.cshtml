@model List<HouseOfSynergy.AffinityDms.WebRole.Models.Tenants.FolderTreeViewModel> 
@{
    this.Layout = "~/Views/Shared/_LayoutTenantThemePrivate.cshtml";
    this.ViewBag.Title = "Move Document into Folder";
}

@Scripts.Render("~/bundles/TypesScript")
@*@if (this.ViewBag.ErrorMessage != null)
{
    if (!string.IsNullOrEmpty(this.ViewBag.ErrorMessage))
    {
        <div style="color:red">@this.ViewBag.ErrorMessage</div>
    }
}*@
@{

    var errormessage = (ViewBag.ErrorMessage != null) ? (ViewBag.ErrorMessage) : (string.Empty);
    var successmessage = (ViewBag.SuccessMessage != null) ? (ViewBag.SuccessMessage) : (string.Empty);
    string displayError = "none", displaySuccess = "none";
    if (!(string.IsNullOrEmpty(errormessage)))
    {
        displayError = "";
    }
    if (!(string.IsNullOrEmpty(successmessage)))
    {
        displaySuccess = "";
    }
    <div id="FolderMoveErrorMessage" style="display:@displayError">
        <div class="alert alert-danger" style="overflow:auto">
            <div style="float:right;" class="col-sm-12 col-md-12 col-lg-12"><b style="float:right;cursor:pointer" data-hideMessageDiv="#FolderMoveErrorMessage" id="hideErrorMessageDiv">X</b></div>
            <div style="word-wrap: break-word;margin-right:30px" id="FolderMoveErrorMessageText">@errormessage</div>
        </div>
    </div>
    <div id="FolderMoveSuccessMessage" style="display:@displaySuccess">
        <div class="alert alert-success" style="overflow:auto">
            <div style="float:right;" class="col-sm-12 col-md-12 col-lg-12"><b style="float:right;cursor:pointer" data-hideMessageDiv="#FolderMoveSuccessMessage" id="hideSuccessMessageDiv">X</b></div>
            <div style="word-wrap: break-word;margin-right:30px" id="FolderMoveSuccessMessageText">@successmessage</div>
        </div>
    </div>

}

<script type="text/javascript">
    var documents = new AffinityDms.Entities.Documents();
    
</script>

<div style="display:inline-block" class="col-md-12">
    <div style="float:right;margin-left:10px">
        <input type="button" value="Move Folder" class="btn btn-primary" data-toggle="modal" data-target="#addFolderModal" onclick="javascript: documents.RenderTreeView(event);">
        <input type="button" value="Back" class="btn btn-primary" onclick="javascript: window.location.href= '@Url.Action("Index","TenantDocumentsFolderWise")'" >
        <input type="hidden" value="@this.ViewBag.Id" id="hdocId"/>
        <input type="hidden" id="FolderTreeSelectedItem" value="0" style="display:none" class="btn btn-primary">
    </div>
</div>

<div id="DivBody" style="width:100%;display: inline-flex; height:550px">

    <div id="DivToolBox" style="display: inline-block;  left: 1%;margin-left: 30px;top: 5%; width: 6%; height: 100%; background-color: steelblue;float:left">
        <div>
            <img id="addfitdivid" src="~/Images/Fit-to-Screen.png" title="Fit to screen" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: documents.FitDiv(event)">
            <img id="addzoomoutbtndivid" src="~/Images/Zoom-Out.png" title="Zoom Out" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: documents.ZoomOutDiv(event)">
            <img id="addzoominbtndivid" src="~/Images/Zoom-In.png" title="Zoom In" style="width:30px;height: 30px;display: block;margin-left: auto;    margin-top: 10px;margin-right: auto" onclick="javascript: documents.ZoomInDiv(event)">
        </div>
        <input type="hidden" id="divcounter" value="0" />
        <input type="hidden" id="Hidfind" value="0" />
        <input type="hidden" id="ImageMove" value="false">
    </div>

    @{

        if (ViewBag.ModelDocuemntImage != null)
        {
            var img = (System.Drawing.Image)ViewBag.ModelDocuemntImage;
            byte[] imgbytearray = ViewBag.ModelDocuemntImageByteArray;
            string imageBase64Data = Convert.ToBase64String(imgbytearray);
            string imageDataURL = string.Format("data:image/png;base64,{0}", imageBase64Data);
            if (img.Size.Width > 0)
            {
                <div id="MainContainer" class="col-md-8" style="overflow: hidden;height: 750px;background-repeat: no-repeat;background-size: cover;position: relative !important;display: inline-block;">
                    <div id="ElementsContainer" style="overflow:visible;width:100%;height: 100%;zoom:1;transform:scale(1);transform-origin:left top">
                        @*<div id="DivPage" style="z-index:500">
                            </div>*@
                        <img src="@imageDataURL" draggable="false" id="DocumentImage" width="@img.Size.Width.ToString()px" height="@img.Size.Height.ToString()px" style="z-index:3;position: relative;" onmousewheel="javascript: documents.OnDivMouseWheel(event)" onmousedown="javascript: documents.OnDivImageMouseDown(event)" />
                    </div>
                </div>
            }
        }
    }
</div>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="addFolderModal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         
                       <h4 class="modal-title" id="gridSystemModalLabel">Folder</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    @{
                        Html.RenderPartial("~/Views/Tenants/Documents/_FolderTreeView.cshtml", (object)Model);
                    }
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="closeFolderAddBtn" onclick="javascript: CloseAddFolderModal(event)">Close</button>
                <button type="button" class="btn btn-primary" onclick="javascript: documents.MoveDocuemtinFolder(event)">Move</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function CloseAddFolderModal(event) {
        $('#addFolderModal').modal('hide');
    }
</script>