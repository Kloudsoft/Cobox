(function(b,a,e){var d=window.jQuery,c=window.$;
window.$=window.jQuery=a;
(function(g,f,j){var i=window.jQuery,h=window.$;
window.$=window.jQuery=f;
(function(l,k){k("util/main",["kendo.core"],l);
}(function(){(function(){var A=Math,x=window.kendo,p=x.deepExtend;
var s=A.PI/180,B=Number.MAX_VALUE,D=-Number.MAX_VALUE,W="undefined";
function q(Y){return typeof Y!==W;
}function P(aa,Z){var Y=G(Z);
return A.round(aa*Y)/Y;
}function G(Y){if(Y){return A.pow(10,Y);
}else{return 1;
}}function z(aa,Z,Y){return A.max(A.min(aa,Y),Z);
}function H(Y){return Y*s;
}function r(Y){return Y/s;
}function v(Y){return typeof Y==="number"&&!isNaN(Y);
}function X(Z,Y){return q(Z)?Z:Y;
}function T(Y){return Y*Y;
}function F(Z){var aa=[];
for(var Y in Z){aa.push(Y+Z[Y]);
}return aa.sort().join("");
}function t(aa){var Y=2166136261;
for(var Z=0;
Z<aa.length;
++Z){Y+=(Y<<1)+(Y<<4)+(Y<<7)+(Y<<8)+(Y<<24);
Y^=aa.charCodeAt(Z);
}return Y>>>0;
}function u(Y){return t(F(Y));
}var E=Date.now;
if(!E){E=function(){return new Date().getTime();
};
}function m(Y){var aa=Y.length,Z,ac=B,ab=D;
for(Z=0;
Z<aa;
Z++){ab=A.max(ab,Y[Z]);
ac=A.min(ac,Y[Z]);
}return{min:ac,max:ab};
}function o(Y){return m(Y).min;
}function n(Y){return m(Y).max;
}function S(Y){return Q(Y).min;
}function R(Y){return Q(Y).max;
}function Q(Y){var ac=B,ab=D;
for(var Z=0,aa=Y.length;
Z<aa;
Z++){var ad=Y[Z];
if(ad!==null&&isFinite(ad)){ac=A.min(ac,ad);
ab=A.max(ab,ad);
}}return{min:ac===B?j:ac,max:ab===D?j:ab};
}function y(Y){if(Y){return Y[Y.length-1];
}}function k(Y,Z){Y.push.apply(Y,Z);
return Y;
}function N(Y){return x.template(Y,{useWithBlock:false,paramName:"d"});
}function J(Y,Z){return q(Z)&&Z!==null?" "+Y+"='"+Z+"' ":"";
}function I(Y){var aa="";
for(var Z=0;
Z<Y.length;
Z++){aa+=J(Y[Z][0],Y[Z][1]);
}return aa;
}function M(Y){var aa="";
for(var Z=0;
Z<Y.length;
Z++){var ab=Y[Z][1];
if(q(ab)){aa+=Y[Z][0]+":"+ab+";";
}}if(aa!==""){return aa;
}}function L(Y){if(typeof Y!=="string"){Y+="px";
}return Y;
}function K(aa){var ab=[];
if(aa){var Z=x.toHyphens(aa).split("-");
for(var Y=0;
Y<Z.length;
Y++){ab.push("k-pos-"+Z[Y]);
}}return ab.join(" ");
}function w(Y){return Y===""||Y===null||Y==="none"||Y==="transparent"||!q(Y);
}function l(Z){var Y={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"};
var ab=[1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];
var aa="";
while(Z>0){if(Z<ab[0]){ab.shift();
}else{aa+=Y[ab[0]];
Z-=ab[0];
}}return aa;
}function O(ab){ab=ab.toLowerCase();
var Y={i:1,v:5,x:10,l:50,c:100,d:500,m:1000};
var ad=0,aa=0;
for(var Z=0;
Z<ab.length;
++Z){var ac=Y[ab.charAt(Z)];
if(!ac){return null;
}ad+=ac;
if(ac>aa){ad-=2*aa;
}aa=ac;
}return ad;
}function C(Z){var Y=Object.create(null);
return function(){var ab="";
for(var aa=arguments.length;
--aa>=0;
){ab+=":"+arguments[aa];
}if(ab in Y){return Y[ab];
}return Z.apply(this,arguments);
};
}function U(ac){var ab=[],Y=0,aa=ac.length,ad,Z;
while(Y<aa){ad=ac.charCodeAt(Y++);
if(ad>=55296&&ad<=56319&&Y<aa){Z=ac.charCodeAt(Y++);
if((Z&64512)==56320){ab.push(((ad&1023)<<10)+(Z&1023)+65536);
}else{ab.push(ad);
Y--;
}}else{ab.push(ad);
}}return ab;
}function V(Y){return Y.map(function(aa){var Z="";
if(aa>65535){aa-=65536;
Z+=String.fromCharCode(aa>>>10&1023|55296);
aa=56320|aa&1023;
}Z+=String.fromCharCode(aa);
return Z;
}).join("");
}p(x,{util:{MAX_NUM:B,MIN_NUM:D,append:k,arrayLimits:m,arrayMin:o,arrayMax:n,defined:q,deg:r,hashKey:t,hashObject:u,isNumber:v,isTransparent:w,last:y,limitValue:z,now:E,objectKey:F,round:P,rad:H,renderAttr:J,renderAllAttr:I,renderPos:K,renderSize:L,renderStyle:M,renderTemplate:N,sparseArrayLimits:Q,sparseArrayMin:S,sparseArrayMax:R,sqr:T,valueOrDefault:X,romanToArabic:O,arabicToRoman:l,memoize:C,ucs2encode:V,ucs2decode:U}});
x.drawing.util=x.util;
x.dataviz.util=x.util;
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(k,l,m){(m||l)();
}));
(function(l,k){k("util/text-metrics",["kendo.core","util/main"],l);
}(function(){(function(k){var o=document,p=window.kendo,l=p.Class,u=p.util,n=u.defined;
var r=l.extend({init:function(w){this._size=w;
this._length=0;
this._map={};
},put:function(x,A){var y=this,z=y._map,w={key:x,value:A};
z[x]=w;
if(!y._head){y._head=y._tail=w;
}else{y._tail.newer=w;
w.older=y._tail;
y._tail=w;
}if(y._length>=y._size){z[y._head.key]=null;
y._head=y._head.newer;
y._head.older=null;
}else{y._length++;
}},get:function(x){var y=this,w=y._map[x];
if(w){if(w===y._head&&w!==y._tail){y._head=w.newer;
y._head.older=null;
}if(w!==y._tail){if(w.older){w.older.newer=w.newer;
w.newer.older=w.older;
}w.older=y._tail;
w.newer=null;
y._tail.newer=w;
y._tail=w;
}return w.value;
}}});
var m=k("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0];
function v(){return{width:0,height:0,baseline:0};
}var t=l.extend({init:function(w){this._cache=new r(1000);
this._initOptions(w);
},options:{baselineMarkerSize:1},measure:function(F,D,x){if(!F){return v();
}var E=u.objectKey(D),z=u.hashKey(F+E),y=this._cache.get(z);
if(y){return y;
}var C=v();
var B=x?x:m;
var w=this._baselineMarker().cloneNode(false);
for(var A in D){var G=D[A];
if(n(G)){B.style[A]=G;
}}k(B).text(F);
B.appendChild(w);
o.body.appendChild(B);
if((F+"").length){C.width=B.offsetWidth-this.options.baselineMarkerSize;
C.height=B.offsetHeight;
C.baseline=w.offsetTop+this.options.baselineMarkerSize;
}if(C.width>0&&C.height>0){this._cache.put(z,C);
}B.parentNode.removeChild(B);
return C;
},_baselineMarker:function(){return k("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0];
}});
t.current=new t();
function s(y,x,w){return t.current.measure(y,x,w);
}function q(y,w){var z=[];
if(y.length>0&&document.fonts){try{z=y.map(function(A){return document.fonts.load(A);
});
}catch(x){p.logToConsole(x);
}Promise.all(z).then(w,w);
}else{w();
}}p.util.TextMetrics=t;
p.util.LRUCache=r;
p.util.loadFonts=q;
p.util.measureText=s;
}(window.kendo.jQuery));
},typeof define=="function"&&define.amd?define:function(k,l,m){(m||l)();
}));
(function(l,k){k("util/base64",["util/main"],l);
}(function(){(function(){var o=window.kendo,k=o.deepExtend,n=String.fromCharCode;
var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function l(y){var z="";
var q,r,s,t,u,v,w;
var x=0;
y=m(y);
while(x<y.length){q=y.charCodeAt(x++);
r=y.charCodeAt(x++);
s=y.charCodeAt(x++);
t=q>>2;
u=(q&3)<<4|r>>4;
v=(r&15)<<2|s>>6;
w=s&63;
if(isNaN(r)){v=w=64;
}else{if(isNaN(s)){w=64;
}}z=z+p.charAt(t)+p.charAt(u)+p.charAt(v)+p.charAt(w);
}return z;
}function m(s){var t="";
for(var r=0;
r<s.length;
r++){var q=s.charCodeAt(r);
if(q<128){t+=n(q);
}else{if(q<2048){t+=n(192|q>>>6);
t+=n(128|q&63);
}else{if(q<65536){t+=n(224|q>>>12);
t+=n(128|q>>>6&63);
t+=n(128|q&63);
}}}}return t;
}k(o.util,{encodeBase64:l,encodeUTF8:m});
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(k,l,m){(m||l)();
}));
(function(l,k){k("mixins/observers",["kendo.core"],l);
}(function(){(function(k){var o=Math,n=window.kendo,l=n.deepExtend,m=k.inArray;
var p={observers:function(){this._observers=this._observers||[];
return this._observers;
},addObserver:function(q){if(!this._observers){this._observers=[q];
}else{this._observers.push(q);
}return this;
},removeObserver:function(q){var s=this.observers();
var r=m(q,s);
if(r!=-1){s.splice(r,1);
}return this;
},trigger:function(s,q){var u=this._observers;
var t;
var r;
if(u&&!this._suspended){for(r=0;
r<u.length;
r++){t=u[r];
if(t[s]){t[s](q);
}}}return this;
},optionsChange:function(q){this.trigger("optionsChange",q);
},geometryChange:function(q){this.trigger("geometryChange",q);
},suspend:function(){this._suspended=(this._suspended||0)+1;
return this;
},resume:function(){this._suspended=o.max((this._suspended||0)-1,0);
return this;
},_observerField:function(q,r){if(this[q]){this[q].removeObserver(this);
}this[q]=r;
r.addObserver(this);
}};
l(n,{mixins:{ObserversMixin:p}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(k,l,m){(m||l)();
}));
(function(l,k){k("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.ooxml","kendo.excel","kendo.progressbar","kendo.pdf"],l);
}(function(){var k={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["mobile.actionsheet","mobile.pane"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]};
(function(l,bw){var aL=window.kendo,bv=aL.ui,P=aL.data.DataSource,bs=aL.support.tbodyInnerHtml,m=aL._activeElement,bG=bv.Widget,aM=aL.keys,aI=l.isPlainObject,Z=l.extend,aQ=l.map,an=l.grep,aA=l.isArray,az=l.inArray,a9=Array.prototype.push,a8=l.proxy,aD=aL.isFunction,aC=l.isEmptyObject,aS=Math,a7="progress",Y="error",N=":not(.k-group-cell):not(.k-hierarchy-cell):visible",bi="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",aX="tr:not(.k-footer-template):visible",aV=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ae=aX+":first>"+aV+":first",av="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",a5=".kendoGrid",W="edit",bf="save",ba="remove",V="detailInit",aa="filterMenuInit",z="columnMenuInit",u="change",x="columnHide",F="columnShow",bg="saveChanges",O="dataBound",U="detailExpand",T="detailCollapse",ah="k-state-focused",bh="k-state-selected",a1="k-grid-norecords",E="columnResize",D="columnReorder",y="columnLock",H="columnUnlock",aW="navigate",w="click",aw="height",bp="tabIndex",al="function",bm="string",R="Are you sure you want to delete this record?",a0="No records available.",K="Delete",t="Cancel",ak=/(\}|\#)/gi,bt=/#/gi,bF="[\\x20\\t\\r\\n\\f]",aY=new RegExp("(^|"+bF+")(k-group-cell|k-hierarchy-cell)("+bF+"|$)"),ab=new RegExp("(^|"+bF+")(k-filter-row)("+bF+"|$)"),J='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',aJ=false,s=aL.support.browser,aE=s.msie&&s.version==7,aF=s.msie&&s.version==8;
var bA=bG.extend({init:function(bH,bI){var bJ=this;
bG.fn.init.call(bJ,bH,bI);
bJ._refreshHandler=a8(bJ.refresh,bJ);
bJ.setDataSource(bI.dataSource);
bJ.wrap();
},setDataSource:function(bH){var bI=this;
if(bI.dataSource){bI.dataSource.unbind(u,bI._refreshHandler);
}bI.dataSource=bH;
bI.dataSource.bind(u,bI._refreshHandler);
},options:{name:"VirtualScrollable",itemHeight:l.noop,prefetch:true},destroy:function(){var bH=this;
bG.fn.destroy.call(bH);
bH.dataSource.unbind(u,bH._refreshHandler);
bH.wrapper.add(bH.verticalScrollbar).off(a5);
if(bH.drag){bH.drag.destroy();
bH.drag=null;
}bH.wrapper=bH.element=bH.verticalScrollbar=null;
bH._refreshHandler=null;
},wrap:function(){var bJ=this,bI=aL.support.scrollbar()+1,bH=bJ.element,bK;
bH.css({width:"auto",overflow:"hidden"}).css(aJ?"padding-left":"padding-right",bI);
bJ.content=bH.children().first();
bK=bJ.wrapper=bJ.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+a5+" mousewheel"+a5,a8(bJ._wheelScroll,bJ));
if(aL.support.kineticScrollNeeded){bJ.drag=new aL.UserEvents(bJ.wrapper,{global:true,start:function(bL){bL.sender.capture();
},move:function(bL){bJ.verticalScrollbar.scrollTop(bJ.verticalScrollbar.scrollTop()-bL.y.delta);
bK.scrollLeft(bK.scrollLeft()-bL.x.delta);
bL.preventDefault();
}});
}bJ.verticalScrollbar=l('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:bI}).appendTo(bH).bind("scroll"+a5,a8(bJ._scroll,bJ));
},_wheelScroll:function(bI){if(bI.ctrlKey){return;
}var bJ=this.verticalScrollbar,bK=bJ.scrollTop(),bH=aL.wheelDeltaY(bI);
if(bH&&!(bH>0&&bK===0)&&!(bH<0&&bK+bJ[0].clientHeight==bJ[0].scrollHeight)){bI.preventDefault();
l(bI.currentTarget).one("wheel"+a5,false);
this.verticalScrollbar.scrollTop(bK+-bH);
}},_scroll:function(bJ){var bS=this,bI=!bS.options.prefetch,bP=bJ.currentTarget.scrollTop,bH=bS.dataSource,bO=bS.itemHeight,bQ=bH.skip()||0,bR=bS._rangeStart||bQ,bL=bS.element.innerHeight(),bM=!!(bS._scrollbarTop&&bS._scrollbarTop>bP),bK=aS.max(aS.floor(bP/bO),0),bN=aS.max(bK+aS.floor(bL/bO),0);
bS._scrollTop=bP-bR*bO;
bS._scrollbarTop=bP;
bS._scrolling=bI;
if(!bS._fetch(bK,bN,bM)){bS.wrapper[0].scrollTop=bS._scrollTop;
}if(bI){if(bS._scrollingTimeout){clearTimeout(bS._scrollingTimeout);
}bS._scrollingTimeout=setTimeout(function(){bS._scrolling=false;
bS._page(bS._rangeStart,bS.dataSource.take());
},100);
}},itemIndex:function(bI){var bH=this._rangeStart||this.dataSource.skip()||0;
return bH+bI;
},position:function(bH){var bJ=this._rangeStart||this.dataSource.skip()||0;
var bI=this.dataSource.pageSize();
var bK;
if(bH>bJ){bK=bH-bJ+1;
}else{bK=bJ-bH-1;
}return bK>bI?bI:bK;
},scrollIntoView:function(bM){var bH=this.wrapper[0];
var bI=bH.clientHeight;
var bJ=this._scrollTop||bH.scrollTop;
var bL=bM[0].offsetTop;
var bK=bM[0].offsetHeight;
if(bJ>bL){this.verticalScrollbar[0].scrollTop-=bI/2;
}else{if(bL+bK>=bJ+bI){this.verticalScrollbar[0].scrollTop+=bI/2;
}}},_fetch:function(bK,bM,bP){var bR=this,bI=bR.dataSource,bL=bR.itemHeight,bQ=bI.take(),bO=bR._rangeStart||bI.skip()||0,bH=aS.floor(bK/bQ)*bQ,bJ=false,bN=0.33;
if(bK<bO){bJ=true;
bO=aS.max(0,bM-bQ);
bR._scrollTop=(bK-bO)*bL;
bR._page(bO,bQ);
}else{if(bM>=bO+bQ&&!bP){bJ=true;
bO=bK;
bR._scrollTop=bL;
bR._page(bO,bQ);
}else{if(!bR._fetching&&bR.options.prefetch){if(bK<bH+bQ-bQ*bN&&bK>bQ){bI.prefetch(bH-bQ,bQ,l.noop);
}if(bM>bH+bQ*bN){bI.prefetch(bH+bQ,bQ,l.noop);
}}}}return bJ;
},fetching:function(){return this._fetching;
},_page:function(bJ,bK){var bL=this,bI=!bL.options.prefetch,bH=bL.dataSource;
clearTimeout(bL._timeout);
bL._fetching=true;
bL._rangeStart=bJ;
if(bH.inRange(bJ,bK)){bH.range(bJ,bK);
}else{if(!bI){aL.ui.progress(bL.wrapper.parent(),true);
}bL._timeout=setTimeout(function(){if(!bL._scrolling){if(bI){aL.ui.progress(bL.wrapper.parent(),true);
}bH.range(bJ,bK);
}},100);
}},repaintScrollbar:function(){var bO=this,bJ="",bM=250000,bI=bO.dataSource,bN=!aL.support.kineticScrollNeeded?aL.support.scrollbar():0,bQ=bO.wrapper[0],bP,bK,bL;
bL=bO.itemHeight=bO.options.itemHeight()||0;
var bH=bQ.scrollWidth>bQ.offsetWidth?bN:0;
bP=bI.total()*bL+bH;
for(bK=0;
bK<aS.floor(bP/bM);
bK++){bJ+='<div style="width:1px;height:'+bM+'px"></div>';
}if(bP%bM){bJ+='<div style="width:1px;height:'+bP%bM+'px"></div>';
}bO.verticalScrollbar.html(bJ);
bQ.scrollTop=bO._scrollTop;
},refresh:function(){var bJ=this,bH=bJ.dataSource,bI=bJ._rangeStart;
aL.ui.progress(bJ.wrapper.parent(),false);
clearTimeout(bJ._timeout);
bJ.repaintScrollbar();
if(bJ.drag){bJ.drag.cancel();
}if(bI&&!bJ._fetching){bJ._rangeStart=bH.skip();
if(bH.page()===1){bJ.verticalScrollbar[0].scrollTop=0;
}}bJ._fetching=false;
}});
function ap(bH){return new Array(bH+1).join('<td class="k-group-cell">&nbsp;</td>');
}function bn(bI){var bH,bJ=" ";
if(bI){if(typeof bI===bm){return bI;
}for(bH in bI){bJ+=bH+'="'+bI[bH]+'"';
}}return bJ;
}var Q={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}};
function M(bH,bI){l("th, th .k-grid-filter, th .k-link",bH).add(document.body).css("cursor",bI);
}function be(bL,bM,bJ,bH,bI){var bN=bM;
bM=l();
bI=bI||1;
for(var bK=0;
bK<bI;
bK++){bM=bM.add(bL.eq(bN+bK));
}if(typeof bJ=="number"){bM[bH?"insertBefore":"insertAfter"](bL.eq(bJ));
}else{bM.appendTo(bJ);
}}function X(bJ,bH,bI){return l(bJ).add(bH).find(bI);
}function r(bL,bK,bJ){var bM,bN,bH,bI;
bJ=!aA(bJ)?[bJ]:bJ;
for(bM=0,bN=bJ.length;
bM<bN;
bM++){bH=bJ[bM];
if(aI(bH)&&bH.click){bI=bH.name||bH.text;
bK.on(w+a5,"a.k-grid-"+(bI||"").replace(/\s/g,""),{commandName:bI},a8(bH.click,bL));
}}}function a3(bH,bI,bJ){return aQ(bH,function(bK){bK=typeof bK===bm?{field:bK}:bK;
var bL;
if(!aK(bK)||bJ){bK.attributes=n(bK.attributes);
bK.footerAttributes=n(bK.footerAttributes);
bK.headerAttributes=n(bK.headerAttributes);
bL=true;
}if(bK.columns){bK.columns=a3(bK.columns,bI,bL);
}var bM=aL.guid();
bK.headerAttributes=Z({id:bM},bK.headerAttributes);
return Z({encoded:bI,hidden:bL},bK);
});
}function A(bH,bI){var bJ=[];
B(bH,bI,bJ);
return bJ[bJ.length-1];
}function B(bH,bI,bL){bL=bL||[];
for(var bJ=0;
bJ<bI.length;
bJ++){if(bH===bI[bJ]){return true;
}else{if(bI[bJ].columns){var bK=bL.length;
bL.push(bI[bJ]);
if(!B(bH,bI[bJ].columns,bL)){bL.splice(bK,bL.length-bK);
}else{return true;
}}}}return false;
}function bk(bH,bJ){var bI=bJ?bc:n;
bH.hidden=!bJ;
bH.attributes=bI(bH.attributes);
bH.footerAttributes=bI(bH.footerAttributes);
bH.headerAttributes=bI(bH.headerAttributes);
}function aB(){return this.style.display!=="none";
}function aK(bH){return bB([bH]).length>0;
}function bB(bH){return an(bH,function(bI){var bJ=!bI.hidden;
if(bJ&&bI.columns){bJ=bB(bI.columns).length>0;
}return bJ;
});
}function bu(bH){return l(bH).map(function(){return this.toArray();
});
}function by(bH,bI,bM){var bJ=S(aP(bI));
var bK=S(aZ(bI));
var bL=bH.rowSpan;
if(bM){if(bJ>bK){bH.rowSpan=bL-(bJ-bK)||1;
}else{bH.rowSpan=bL+(bK-bJ);
}}else{if(bJ>bK){bH.rowSpan=bL+(bJ-bK);
}else{bH.rowSpan=bL-(bK-bJ)||1;
}}}function aU(bO,bQ,bM,bH,bI,bJ,bL){var bP=S(bO);
var bR=S([bQ]);
if(bP>bR){var bK=new Array(bL+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');
var bN=bJ.children(":not(.k-filter-row)");
l(new Array(bP-bR+1).join("<tr>"+bK+"</tr>")).insertAfter(bN.last());
}o(bJ,bP-bR);
aT(bM,bH,bI,bJ);
}function bx(bR,bK,bO){bO=bO||0;
var bP;
var bI;
var bH=bK;
bK=aN(bK);
var bJ={};
var bQ=bR.find(">tr:not(.k-filter-row)");
var bL=function(){var bS=l(this);
return !bS.hasClass("k-group-cell")&&!bS.hasClass("k-hierarchy-cell");
};
for(var bM=0,bN=bK.length;
bM<bN;
bM++){bP=C(bK[bM],bH);
if(!bJ[bP.row]){bJ[bP.row]=bQ.eq(bP.row).find(".k-header").filter(bL);
}bI=bJ[bP.row].eq(bP.cell);
bI.attr(aL.attr("index"),bO+bM);
}return bK.length;
}function S(bH){var bK=1;
var bJ=0;
for(var bI=0;
bI<bH.length;
bI++){if(bH[bI].columns){var bL=S(bH[bI].columns);
if(bL>bJ){bJ=bL;
}}}return bK+bJ;
}function aT(bM,bI,bJ,bK){var bO=I(bM[0],bI);
var bQ=bJ.find(">tr:not(.k-filter-row):eq("+bO.row+")>th.k-header");
var bP=l();
var bN=bO.cell;
var bL;
for(bL=0;
bL<bM.length;
bL++){bP=bP.add(bQ.eq(bN+bL));
}bK.find(">tr:not(.k-filter-row)").eq(bO.row).append(bP);
var bH=[];
for(bL=0;
bL<bM.length;
bL++){if(bM[bL].columns){bH=bH.concat(bM[bL].columns);
}}if(bH.length){aT(bH,bI,bJ,bK);
}}function C(bI,bJ,bM,bH){var bL;
var bK;
bM=bM||0;
bH=bH||{};
bH[bM]=bH[bM]||0;
for(bK=0;
bK<bJ.length;
bK++){if(bJ[bK]==bI){bL={cell:bH[bM],row:bM};
break;
}else{if(bJ[bK].columns){bL=C(bI,bJ[bK].columns,bM+1,bH);
if(bL){break;
}}}bH[bM]++;
}return bL;
}function ac(bH,bI,bL,bK){var bM;
var bJ=bL.locked;
do{bM=bH[bI];
bI+=bK?1:-1;
}while(bM&&bI>-1&&bI<bH.length&&bM!=bL&&!bM.columns&&bM.locked==bJ);
return bM;
}function ad(bI,bO,bM,bH){if(bO.columns){bO=bO.columns;
return bO[bH?0:bO.length-1];
}else{var bK=A(bO,bI);
var bL;
if(bK){bL=bK.columns;
}else{bL=bI;
}var bJ=az(bO,bL);
if(bJ===0&&bH){bJ++;
}else{if(bJ==bL.length-1&&!bH){bJ--;
}else{if(bJ>0||bJ===0&&!bH){bJ+=bH?-1:1;
}}}var bN=az(bM,bL);
bO=ac(bL,bJ,bM,bN>bJ);
if(bO&&bO!=bM&&bO.columns){return ad(bI,bO,bM,bH);
}}return null;
}function I(bI,bJ,bM,bH){var bL;
var bK;
bM=bM||0;
bH=bH||{};
bH[bM]=bH[bM]||0;
for(bK=0;
bK<bJ.length;
bK++){if(bJ[bK]==bI){bL={cell:bH[bM],row:bM};
break;
}else{if(bJ[bK].columns){bL=I(bI,bJ[bK].columns,bM+1,bH);
if(bL){break;
}}}if(!bJ[bK].hidden){bH[bM]++;
}}return bL;
}function ag(bH){var bI=af(aP(bH));
return bI.concat(af(aZ(bH)));
}function af(bI){var bK=[];
var bH=[];
for(var bJ=0;
bJ<bI.length;
bJ++){bK.push(bI[bJ]);
if(bI[bJ].columns){bH=bH.concat(bI[bJ].columns);
}}if(bH.length){bK=bK.concat(af(bH));
}return bK;
}function ax(bI){var bJ=0;
var bH;
for(var bK=0;
bK<bI.length;
bK++){bH=bI[bK];
if(bH.columns){bJ+=ax(bH.columns);
}else{if(bH.hidden){bJ++;
}}}return bJ;
}function G(bH){var bI,bL=0;
for(var bJ=0,bK=bH.length;
bJ<bK;
bJ++){bI=bH[bJ].style.width;
if(bI&&bI.indexOf("%")==-1){bL+=parseInt(bI,10);
}}return bL;
}function bd(bI,bJ){var bH=bI.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
var bL;
for(var bK=0;
bK<bH.length;
bK++){bL=bH[bK].rowSpan;
if(bL>1){bH[bK].rowSpan=bL-bJ||1;
}}}function o(bI,bJ){var bH=bI.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bK=0;
bK<bH.length;
bK++){bH[bK].rowSpan+=bJ;
}}function bb(bI){var bL=bI.find("tr:not(.k-filter-row)");
var bJ=bL.filter(function(){return !l(this).children().length;
}).remove().length;
var bH=bL.find("th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bK=0;
bK<bH.length;
bK++){if(bH[bK].rowSpan>1){bH[bK].rowSpan-=bJ;
}}return bL.length-bJ;
}function aR(bJ,bH,bP,bO,bM){var bK,bN,bL,bI=[];
for(bK=0,bL=bJ.length;
bK<bL;
bK++){bN=bP[bO]||[];
bN.push(bH.eq(bM+bK));
bP[bO]=bN;
if(bJ[bK].columns){bI=bI.concat(bJ[bK].columns);
}}if(bI.length){aR(bI,bH,bP,bO+1,bM+bJ.length);
}}function aP(bH){return an(bH,function(bI){return bI.locked;
});
}function aZ(bH){return an(bH,function(bI){return !bI.locked;
});
}function bE(bH){return an(bH,function(bI){return !bI.locked&&aK(bI);
});
}function bD(bH){return an(bH,function(bI){return bI.locked&&aK(bI);
});
}function bC(bH){var bJ=[];
for(var bI=0;
bI<bH.length;
bI++){if(bH[bI].hidden){continue;
}if(bH[bI].columns){bJ=bJ.concat(bC(bH[bI].columns));
}else{bJ.push(bH[bI]);
}}return bJ;
}function aN(bH){var bJ=[];
for(var bI=0;
bI<bH.length;
bI++){if(!bH[bI].columns){bJ.push(bH[bI]);
continue;
}bJ=bJ.concat(aN(bH[bI].columns));
}return bJ;
}function aO(bI){var bL=bI.find(">tr:not(.k-filter-row)");
var bJ=function(){var bM=l(this);
return !bM.hasClass("k-group-cell")&&!bM.hasClass("k-hierarchy-cell");
};
var bH=l();
if(bL.length>1){bH=bL.find("th").filter(bJ).filter(function(){return this.rowSpan>1;
});
}bH=bH.add(bL.last().find("th").filter(bJ));
var bK=aL.attr("index");
bH.sort(function(bM,bN){bM=l(bM);
bN=l(bN);
var bO=bM.attr(bK);
var bP=bN.attr(bK);
if(bO===bw){bO=l(bM).index();
}if(bP===bw){bP=l(bN).index();
}bO=parseInt(bO,10);
bP=parseInt(bP,10);
return bO>bP?1:bO<bP?-1:0;
});
return bH;
}function a6(bH){var bI=bH.closest("table");
var bS=l().add(bH);
var bT=bH.closest("tr");
var bJ=bI.find("tr:not(.k-filter-row)");
var bM=bJ.index(bT);
if(bM>0){var bO=bJ.eq(bM-1);
var bQ=bO.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !l(this).attr("rowspan");
});
var bN=0;
var bL=bT.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bH);
var bR=bH.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1;
});
for(var bK=0;
bK<bR.length;
bK++){bN+=bR[bK].colSpan||1;
}bL+=Math.max(bN-1,0);
bN=0;
for(bK=0;
bK<bQ.length;
bK++){var bP=bQ.eq(bK);
if(bP.attr("colSpan")){bN+=bP[0].colSpan;
}else{bN+=1;
}if(bL>=bK&&bL<bN){bS=a6(bP).add(bS);
break;
}}}return bS;
}function v(bH){var bM=bH.closest("thead");
var bS=l().add(bH);
var bT=bH.closest("tr");
var bN=bM.find("tr:not(.k-filter-row)");
var bP=bN.index(bT)+bH[0].rowSpan;
var bL=aL.attr("colspan");
if(bP<=bN.length-1){var bJ=bT.next();
var bR=bH.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");
var bO;
bR=bR.filter(function(){return !this.rowSpan||this.rowSpan===1;
});
var bQ=0;
for(bO=0;
bO<bR.length;
bO++){bQ+=parseInt(bR.eq(bO).attr(bL),10)||1;
}var bI=bJ.find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bK=parseInt(bH.attr(bL),10)||1;
bO=0;
while(bO<bK){bJ=bI.eq(bO+bQ);
bS=bS.add(v(bJ));
var bU=parseInt(bJ.attr(bL),10);
if(bU>1){bK-=bU-1;
}bO++;
}}return bS;
}function q(bL,bK,bI,bH){var bJ,bM=bL;
if(bH){bL.empty();
}if(bs){bL[0].innerHTML=bI;
}else{bJ=document.createElement("div");
bJ.innerHTML="<table><tbody>"+bI+"</tbody></table>";
bL=bJ.firstChild.firstChild;
bK[0].replaceChild(bL,bM[0]);
bL=l(bL);
}return bL;
}function n(bH){bH=bH||{};
var bI=bH.style;
if(!bI){bI="display:none";
}else{bI=bI.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none");
if(bI===bH.style){bI=bI.replace(/(.*)?/i,"display:none;$1");
}}return Z({},bH,{style:bI});
}function bc(bH){bH=bH||{};
var bI=bH.style;
if(bI){bH.style=bI.replace(/(display\s*:\s*none\s*;?)*/gi,"");
}return bH;
}function a2(bL,bM,bK,bJ){var bH=bL.find(">colgroup"),bN,bI=aQ(bM,function(bO){bN=bO.width;
if(bN&&parseInt(bN,10)!==0){return aL.format('<col style="width:{0}"/>',typeof bN===bm?bN:bN+"px");
}return"<col />";
});
if(bK||bH.find(".k-hierarchy-col").length){bI.splice(0,0,'<col class="k-hierarchy-col" />');
}if(bH.length){bH.remove();
}bH=l(new Array(bJ+1).join('<col class="k-group-col">')+bI.join(""));
if(!bH.is("colgroup")){bH=l("<colgroup/>").append(bH);
}bL.prepend(bH);
if(s.msie&&s.version==8){bL.css("display","inline-table");
window.setTimeout(function(){bL.css("display","");
},1);
}}function a4(bI,bH){var bK=0;
var bJ,bL;
var bM=bI.find("th:not(.k-group-cell)");
for(bJ=0,bL=bH.length;
bJ<bL;
bJ++){if(bH[bJ].locked){bM.eq(bJ).insertBefore(bM.eq(bK));
bM=bI.find("th:not(.k-group-cell)");
bK++;
}}}function L(bH){var bL={},bJ,bI,bK;
for(bI=0,bK=bH.length;
bI<bK;
bI++){bJ=bH[bI];
bL[bJ.value]=bJ.text;
}return bL;
}function aj(bM,bJ,bH,bI){var bL=bH&&bH.length&&aI(bH[0])&&"value" in bH[0],bK=bL?L(bH)[bM]:bM;
bK=bK!=null?bK:"";
return bJ?aL.format(bJ,bK):bI===false?bK:aL.htmlEncode(bK);
}function bj(bI,bJ,bM){var bK=0,bL,bH=bI[bK];
while(bH){bL=bM?true:bH.style.display!=="none";
if(bL&&!aY.test(bH.className)&&--bJ<0){bH.style.display=bM?"":"none";
break;
}bH=bI[++bK];
}}function ay(bM,bI){var bJ=0,bK=bM.length,bH,bL;
for(;
bJ<bK;
bJ+=1){bL=bM.eq(bJ);
if(bL.is(".k-grouping-row,.k-detail-row")){bH=bL.children(":not(.k-group-cell):first,.k-detail-cell").last();
bH.attr("colspan",parseInt(bH.attr("colspan"),10)-1);
}else{if(bL.hasClass("k-grid-edit-row")&&(bH=bL.children(".k-edit-container")[0])){bH=l(bH);
bH.attr("colspan",parseInt(bH.attr("colspan"),10)-1);
bH.find("col").eq(bI).remove();
bL=bH.find("tr:first");
}bj(bL[0].cells,bI,false);
}}}function au(bH){var bK=[];
var bJ;
for(var bI=0;
bI<bH.length;
bI++){bJ=bH[bI];
if(!("field" in bJ&&"value" in bJ&&"items" in bJ)){break;
}bK.push(bJ);
if(bJ.hasSubgroups){bK=bK.concat(au(bJ.items));
}}return bK;
}function aq(bH){var bK=[];
var bJ;
for(var bI=0;
bI<bH.length;
bI++){bJ=bH[bI];
if(!("field" in bJ&&"value" in bJ&&"items" in bJ)){break;
}if(bJ.hasSubgroups){bK=bK.concat(aq(bJ.items));
}bK.push(bJ.aggregates);
}return bK;
}function bl(bN,bI){var bK=0,bL=bN.length,bH,bM,bJ;
for(;
bK<bL;
bK+=1){bM=bN.eq(bK);
if(bM.is(".k-grouping-row,.k-detail-row")){bH=bM.children(":not(.k-group-cell):first,.k-detail-cell").last();
bH.attr("colspan",parseInt(bH.attr("colspan"),10)+1);
}else{if(bM.hasClass("k-grid-edit-row")&&(bH=bM.children(".k-edit-container")[0])){bH=l(bH);
bH.attr("colspan",parseInt(bH.attr("colspan"),10)+1);
a2(bH.find(">form>table"),bB(bJ),false,0);
bM=bH.find("tr:first");
}bj(bM[0].cells,bI,true);
}}}function bz(bL,bM,bK){bK=bK||1;
var bI,bH,bJ;
for(bH=0,bJ=bL.length;
bH<bJ;
bH++){bI=bL.eq(bH).children().last();
bI.attr("colspan",parseInt(bI.attr("colspan"),10)+bK);
bI=bM.eq(bH).children().last();
bI.attr("colspan",parseInt(bI.attr("colspan"),10)-bK);
}}function br(bK){var bI,bJ,bL=0;
var bH=bK.find(">colgroup>col");
for(bI=0,bJ=bH.length;
bI<bJ;
bI+=1){bL+=parseInt(bH[bI].style.width,10);
}return bL;
}var ao=aL.ui.DataBoundWidget.extend({init:function(bH,bJ,bI){var bK=this;
bJ=aA(bJ)?{dataSource:bJ}:bJ;
bG.fn.init.call(bK,bH,bJ);
if(bI){bK._events=bI;
}aJ=aL.support.isRtl(bH);
bK._element();
bK._aria();
bK._columns(bK.options.columns);
bK._dataSource();
bK._tbody();
bK._pageable();
bK._thead();
bK._groupable();
bK._toolbar();
bK._setContentHeight();
bK._templates();
bK._navigatable();
bK._selectable();
bK._clipboard();
bK._details();
bK._editable();
bK._attachCustomCommandsEvent();
bK._minScreenSupport();
if(bK.options.autoBind){bK.dataSource.fetch();
}else{bK._group=bK._groups()>0;
bK._footer();
}if(bK.lockedContent){bK.wrapper.addClass("k-grid-lockedcolumns");
bK._resizeHandler=function(){bK.resize();
};
l(window).on("resize"+a5,bK._resizeHandler);
}aL.notify(bK);
},events:[u,"dataBinding","cancel",O,U,T,V,aa,z,W,bf,ba,bg,E,D,F,x,y,H,aW],setDataSource:function(bH){var bJ=this;
var bI=bJ.options.scrollable;
bJ.options.dataSource=bH;
bJ._dataSource();
bJ._pageable();
bJ._thead();
if(bI){if(bI.virtual){bJ.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0);
}else{bJ.content.scrollLeft(0);
}}if(bJ.options.groupable){bJ._groupable();
}if(bJ.virtualScrollable){bJ.virtualScrollable.setDataSource(bJ.options.dataSource);
}if(bJ.options.navigatable){bJ._navigatable();
}if(bJ.options.selectable){bJ._selectable();
}if(bJ.options.autoBind){bH.fetch();
}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:t,confirmation:R,confirmDelete:K},commands:{create:Q.create.text,cancel:Q.cancel.text,save:Q.save.text,destroy:Q.destroy.text,edit:Q.edit.text,update:Q.update.text,canceledit:Q.canceledit.text,excel:Q.excel.text,pdf:Q.pdf.text},noRecords:a0}},destroy:function(){var bI=this,bH;
bI._angularItems("cleanup");
bI._destroyColumnAttachments();
bG.fn.destroy.call(bI);
this._navigatableTables=null;
if(bI._resizeHandler){l(window).off("resize"+a5,bI._resizeHandler);
}if(bI.pager&&bI.pager.element){bI.pager.destroy();
}bI.pager=null;
if(bI.groupable&&bI.groupable.element){bI.groupable.element.kendoGroupable("destroy");
}bI.groupable=null;
if(bI.options.reorderable){bI.wrapper.data("kendoReorderable").destroy();
}if(bI.selectable&&bI.selectable.element){bI.selectable.destroy();
bI.clearArea();
if(bI.copyHandler){bI.wrapper.off("keydown",bI.copyHandler);
bI.unbind(bI.copyHandler);
}if(bI.updateClipBoardState){bI.unbind(bI.updateClipBoardState);
bI.updateClipBoardState=null;
}if(bI.clearAreaHandler){bI.wrapper.off("keyup",bI.clearAreaHandler);
}}bI.selectable=null;
if(bI.resizable){bI.resizable.destroy();
if(bI._resizeUserEvents){if(bI._resizeHandleDocumentClickHandler){l(document).off("click",bI._resizeHandleDocumentClickHandler);
}bI._resizeUserEvents.destroy();
bI._resizeUserEvents=null;
}bI.resizable=null;
}if(bI.virtualScrollable&&bI.virtualScrollable.element){bI.virtualScrollable.destroy();
}bI.virtualScrollable=null;
bI._destroyEditable();
if(bI.dataSource){bI.dataSource.unbind(u,bI._refreshHandler).unbind(a7,bI._progressHandler).unbind(Y,bI._errorHandler);
bI._refreshHandler=bI._progressHandler=bI._errorHandler=null;
}bH=bI.element.add(bI.wrapper).add(bI.table).add(bI.thead).add(bI.wrapper.find(">.k-grid-toolbar"));
if(bI.content){bH=bH.add(bI.content).add(bI.content.find(">.k-virtual-scrollable-wrap"));
}if(bI.lockedHeader){bI._removeLockedContainers();
}if(bI.pane){bI.pane.destroy();
}if(bI.minScreenResizeHandler){l(window).off("resize",bI.minScreenResizeHandler);
}if(bI._draggableInstance&&bI._draggableInstance.element){bI._draggableInstance.destroy();
}bI._draggableInstance=null;
bH.off(a5);
aL.destroy(bI.wrapper);
bI.rowTemplate=bI.altRowTemplate=bI.lockedRowTemplate=bI.lockedAltRowTemplate=bI.detailTemplate=bI.footerTemplate=bI.groupFooterTemplate=bI.lockedGroupFooterTemplate=bI.noRecordsTemplate=null;
bI.scrollables=bI.thead=bI.tbody=bI.element=bI.table=bI.content=bI.footer=bI.wrapper=bI.lockedTable=bI.lockedContent=bI.lockedHeader=bI.lockedFooter=bI._groupableClickHandler=bI._setContentWidthHandler=null;
},getOptions:function(){var bJ=this.options;
bJ.dataSource=null;
var bK=Z(true,{},this.options);
bK.columns=aL.deepExtend([],this.columns);
var bH=this.dataSource;
var bI=bH.options.data&&bH._data;
bH.options.data=null;
bK.dataSource=l.extend(true,{},bH.options);
bH.options.data=bI;
bK.dataSource.data=bI;
bK.dataSource.page=bH.page();
bK.dataSource.filter=bH.filter();
bK.dataSource.pageSize=bH.pageSize();
bK.dataSource.sort=bH.sort();
bK.dataSource.group=bH.group();
bK.dataSource.aggregate=bH.aggregate();
if(bK.dataSource.transport){bK.dataSource.transport.dataSource=null;
}if(bK.pageable&&bK.pageable.pageSize){bK.pageable.pageSize=bH.pageSize();
}bK.$angular=bw;
return bK;
},setOptions:function(bL){var bH=this.getOptions();
aL.deepExtend(bH,bL);
if(!bL.dataSource){bH.dataSource=this.dataSource;
}var bM=this.wrapper;
var bJ=this._events;
var bI=this.element;
this.destroy();
this.options=null;
if(this._isMobile){var bK=bM.closest(aL.roleSelector("pane")).parent();
bK.after(bM);
bK.remove();
bM.removeClass("k-grid-mobile");
}if(bM[0]!==bI[0]){bM.before(bI);
bM.remove();
}bI.empty();
this.init(bI,bH,bJ);
this._setEvents(bH);
},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));
}else{return this._items(this.tbody);
}},_items:function(bH){return bH.children().filter(function(){var bI=l(this);
return !bI.hasClass("k-grouping-row")&&!bI.hasClass("k-detail-row")&&!bI.hasClass("k-group-footer");
});
},dataItems:function(){var bH=aL.ui.DataBoundWidget.fn.dataItems.call(this);
if(this.lockedContent){var bJ=bH.length,bK=new Array(2*bJ);
for(var bI=bJ;
--bI>=0;
){bK[bI]=bK[bI+bJ]=bH[bI];
}bH=bK;
}return bH;
},_destroyColumnAttachments:function(){var bH=this;
bH.resizeHandle=null;
if(!bH.thead){return;
}this.angular("cleanup",function(){return{elements:bH.thead.get()};
});
bH.thead.add(bH.lockedHeader).find("th").each(function(){var bL=l(this),bJ=bL.data("kendoFilterMenu"),bK=bL.data("kendoColumnSorter"),bI=bL.data("kendoColumnMenu");
if(bJ){bJ.destroy();
}if(bK){bK.destroy();
}if(bI){bI.destroy();
}});
},_attachCustomCommandsEvent:function(){var bL=this,bH=aN(bL.columns||[]),bI,bJ,bK;
for(bJ=0,bK=bH.length;
bJ<bK;
bJ++){bI=bH[bJ].command;
if(bI){r(bL,bL.wrapper,bI);
}}},_aria:function(){var bH=this.element.attr("id")||"aria";
if(bH){this._cellId=bH+"_active_cell";
}},_element:function(){var bI=this,bH=bI.element;
if(!bH.is("table")){if(bI.options.scrollable){bH=bI.element.find("> .k-grid-content > table");
}else{bH=bI.element.children("table");
}if(!bH.length){bH=l("<table />").appendTo(bI.element);
}}if(aE){bH.attr("cellspacing",0);
}bI.table=bH.attr("role",bI._hasDetails()?"treegrid":"grid");
bI._wrapper();
},_createResizeHandle:function(bI,bS){var bT=this;
var bO=bT.options.columnResizeHandleWidth;
var bR=bT.options.scrollable;
var bQ=bT.resizeHandle;
var bK=this._groups();
var bP;
if(bQ&&bT.lockedContent&&bQ.data("th")[0]!==bS[0]){bQ.off(a5).remove();
bQ=null;
}if(!bQ){bQ=bT.resizeHandle=l('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');
bI.append(bQ);
}if(!aJ){bP=bS[0].offsetWidth;
var bH=aO(bS.closest("thead")).filter(":visible");
for(var bM=0;
bM<bH.length;
bM++){if(bH[bM]==bS[0]){break;
}bP+=bH[bM].offsetWidth;
}if(bK>0){bP+=bI.find(".k-group-cell:first").outerWidth()*bK;
}if(bT._hasDetails()){bP+=bI.find(".k-hierarchy-cell:first").outerWidth();
}}else{bP=bS.position().left;
if(bR){var bL=bS.closest(".k-grid-header-wrap, .k-grid-header-locked"),bN=s.msie?bL.scrollLeft():0,bU=s.webkit?bL[0].scrollWidth-bL[0].offsetWidth-bL.scrollLeft():0,bJ=s.mozilla?bL[0].scrollWidth-bL[0].offsetWidth-(bL[0].scrollWidth-bL[0].offsetWidth-bL.scrollLeft()):0;
bP-=bU-bJ+bN;
}}bQ.css({top:bS.position().top,left:bP-bO,height:bS.outerHeight(),width:bO*3}).data("th",bS).show();
bQ.off("dblclick"+a5).on("dblclick"+a5,function(){bT._autoFitLeafColumn(bS.data("index"));
});
},_positionColumnResizeHandle:function(){var bJ=this,bH=bJ.options.columnResizeHandleWidth,bI=bJ.lockedHeader?bJ.lockedHeader.find("thead:first"):l();
bJ.thead.add(bI).on("mousemove"+a5,"th",function(bL){var bN=l(this);
if(bN.hasClass("k-group-cell")||bN.hasClass("k-hierarchy-cell")){return;
}var bK=bL.clientX,bO=l(window).scrollLeft(),bM=bN.offset().left+(!aJ?this.offsetWidth:0);
if(bK+bO>bM-bH&&bK+bO<bM+bH){bJ._createResizeHandle(bN.closest("div"),bN);
}else{if(bJ.resizeHandle){bJ.resizeHandle.hide();
}else{M(bJ.wrapper,"");
}}});
},_resizeHandleDocumentClick:function(bH){if(l(bH.target).closest(".k-column-active").length){return;
}l(document).off(bH);
this._hideResizeHandle();
},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");
if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(a5).remove();
this.resizeHandle=null;
}else{this.resizeHandle.hide();
}}},_positionColumnResizeHandleTouch:function(){var bI=this,bH=bI.lockedHeader?bI.lockedHeader.find("thead:first"):l();
bI._resizeUserEvents=new aL.UserEvents(bH.add(bI.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(bJ){var bK=l(bJ.target);
bJ.preventDefault();
bK.addClass("k-column-active");
bI._createResizeHandle(bK.closest("div"),bK);
if(!bI._resizeHandleDocumentClickHandler){bI._resizeHandleDocumentClickHandler=a8(bI._resizeHandleDocumentClick,bI);
}l(document).on("click",bI._resizeHandleDocumentClickHandler);
}});
},_resizable:function(){var bR=this,bO=bR.options,bK,bI,bJ,bL,bN=this._isMobile,bP=!aL.support.mobileOS?aL.support.scrollbar():0,bM,bH,bQ;
if(bO.resizable){bK=bO.scrollable?bR.wrapper.find(".k-grid-header-wrap:first"):bR.wrapper;
if(bN){bR._positionColumnResizeHandleTouch(bK);
}else{bR._positionColumnResizeHandle(bK);
}if(bR.resizable){bR.resizable.destroy();
}bR.resizable=new bv.Resizable(bK.add(bR.lockedHeader),{handle:(!!bO.scrollable?"":">")+".k-resize-handle",hint:function(bS){return l('<div class="k-grid-resize-indicator" />').css({height:bS.data("th").outerHeight()+bR.tbody.attr("clientHeight")});
},start:function(bT){bQ=l(bT.currentTarget).data("th");
if(bN){bR._hideResizeHandle();
}var bV=bQ.closest("table"),bW=l.inArray(bQ[0],aO(bQ.closest("thead")).filter(":visible"));
bM=bV.parent().hasClass("k-grid-header-locked");
var bS=bM?bR.lockedTable:bR.table,bU=bR.footer||l();
if(bR.footer&&bR.lockedContent){bU=bM?bR.footer.children(".k-grid-footer-locked"):bR.footer.children(".k-grid-footer-wrap");
}M(bR.wrapper,"col-resize");
if(bO.scrollable){bH=bV.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bW+")").add(bS.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bW+")")).add(bU.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bW+")"));
}else{bH=bS.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bW+")");
}bI=bT.x.location;
bJ=bQ.outerWidth();
bL=bM?bS.children("tbody").outerWidth():bR.tbody.outerWidth();
if(s.webkit){bR.wrapper.addClass("k-grid-column-resizing");
}},resize:function(bV){var bY=aJ?-1:1,bU=bJ+bV.x.location*bY-bI*bY;
if(bO.scrollable){var bW;
if(bM&&bR.lockedFooter){bW=bR.lockedFooter.children("table");
}else{if(bR.footer){bW=bR.footer.find(">.k-grid-footer-wrap>table");
}}if(!bW||!bW[0]){bW=l();
}var bX=bQ.closest("table");
var bT=bM?bR.lockedTable:bR.table;
var bS=false;
var bZ=bR.wrapper.width()-bP;
var b0=bU;
if(bM&&bL-bJ+b0>bZ){b0=bJ+(bZ-bL-bP*2);
if(b0<0){b0=bU;
}bS=true;
}if(b0>10){bH.css("width",b0);
if(bL){if(bS){b0=bZ-bP*2;
}else{b0=bL+bV.x.location*bY-bI*bY;
}bT.add(bX).add(bW).css("width",b0);
if(!bM){bR._footerWidth=b0;
}}}}else{if(bU>10){bH.css("width",bU);
}}},resizeend:function(){var bV=bQ.outerWidth(),bS,bT;
M(bR.wrapper,"");
if(s.webkit){bR.wrapper.removeClass("k-grid-column-resizing");
}if(bJ!=bV){bT=bR.lockedHeader?bR.lockedHeader.find("thead:first tr:first").add(bR.thead.find("tr:first")):bQ.parent();
var bU=bQ.attr(aL.attr("index"));
if(!bU){bU=bT.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(bQ);
}bS=aN(bR.columns)[bU];
bS.width=bV;
bR.trigger(E,{column:bS,oldWidth:bJ,newWidth:bV});
bR._applyLockedContainersWidth();
bR._syncLockedContentHeight();
bR._syncLockedHeaderHeight();
}bR._hideResizeHandle();
bQ=null;
}});
}},_draggable:function(){var bH=this;
if(bH.options.reorderable){if(bH._draggableInstance){bH._draggableInstance.destroy();
}bH._draggableInstance=bH.wrapper.kendoDraggable({group:aL.guid(),autoScroll:true,filter:bH.content?".k-grid-header:first "+av:"table:first>.k-grid-header "+av,drag:function(){bH._hideResizeHandle();
},hint:function(bI){return l('<div class="k-header k-drag-clue" />').css({width:bI.width(),paddingLeft:bI.css("paddingLeft"),paddingRight:bI.css("paddingRight"),lineHeight:bI.height()+"px",paddingTop:bI.css("paddingTop"),paddingBottom:bI.css("paddingBottom")}).html(bI.attr(aL.attr("title"))||bI.attr(aL.attr("field"))||bI.text()).prepend('<span class="k-icon k-drag-status k-denied" />');
}}).data("kendoDraggable");
}},_reorderable:function(){var bI=this;
if(bI.options.reorderable){if(bI.wrapper.data("kendoReorderable")){bI.wrapper.data("kendoReorderable").destroy();
}var bH=function(bK,bM,bO){var bJ=bK[bM];
var bN=bK[bO];
var bL=A(bJ,bI.columns);
bK=bL?bL.columns:bI.columns;
return az(bN,bK);
};
bI.wrapper.kendoReorderable({draggable:bI._draggableInstance,dragOverContainers:function(bK,bL){var bJ=ag(bI.columns);
return bJ[bK].lockable!==false&&bH(bJ,bK,bL)>-1;
},inSameContainer:function(bJ){return l(bJ.source).parent()[0]===l(bJ.target).parent()[0]&&bH(ag(bI.columns),bJ.sourceIndex,bJ.targetIndex)>-1;
},change:function(bL){var bK=ag(bI.columns);
var bJ=bK[bL.oldIndex];
var bM=bH(bK,bL.oldIndex,bL.newIndex);
bI.trigger(D,{newIndex:bM,oldIndex:az(bJ,bK),column:bJ});
bI.reorderColumn(bM,bJ,bL.position==="before");
}});
}},_reorderHeader:function(bN,bO,bH){var bQ=this;
var bM=C(bN[0],bQ.columns);
var bI=C(bO,bQ.columns);
var bK=[];
for(var bJ=0;
bJ<bN.length;
bJ++){if(bN[bJ].columns){bK=bK.concat(bN[bJ].columns);
}}var bR=X(bQ.lockedHeader,bQ.thead,"tr:eq("+bM.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
var bL=aP(bN).length;
var bP=aP([bO]).length;
if(bK.length){if(bL>0&&bP===0){aU(bN,bO,bK,bQ.columns,bQ.lockedHeader.find("thead"),bQ.thead,this._groups());
}else{if(bL===0&&bP>0){aU(bN,bO,bK,bQ.columns,bQ.thead,bQ.lockedHeader.find("thead"),this._groups());
}}if(bO.columns||bM.cell-bI.cell>1||bI.cell-bM.cell>1){bO=ad(bQ.columns,bO,bN[0],bH);
if(bO){bQ._reorderHeader(bK,bO,bH);
}}}else{if(bL!==bP){by(bR[bM.cell],bQ.columns,bL);
}}be(bR,bM.cell,bI.cell,bH,bN.length);
},_reorderContent:function(bX,bK,bH){var bY=this;
var bT=l();
var bV=bX[0];
var bZ=bB(bX);
var bW=az(bV,aN(bY.columns));
var bL=az(bK,aN(bY.columns));
var bJ=az(bV,bC(bY.columns));
var bI=az(bK,bC(bY.columns));
var bS=aP(bY.columns).length;
var bQ=!!bK.locked;
var bM=bY.footer||bY.wrapper.find(".k-grid-footer");
var bO,bN;
bO=bN=bI;
if(bK.hidden){if(bQ){bI=bY.lockedTable.find("colgroup");
bO=bY.lockedHeader.find("colgroup");
bN=l(bY.lockedFooter).find(">table>colgroup");
}else{bI=bY.tbody.prev();
bO=bY.thead.prev();
bN=bM.find(".k-grid-footer-wrap").find(">table>colgroup");
}}if(bY._hasFilterRow()){be(bY.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),bW,bL,bH,bX.length);
}be(X(bY.lockedHeader,bY.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bJ,bO,bH,bZ.length);
if(bY.options.scrollable){be(X(bY.lockedTable,bY.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bJ,bI,bH,bZ.length);
}if(bM&&bM.length){be(X(bY.lockedFooter,bM.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),bJ,bN,bH,bZ.length);
be(bM.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),bW,bL,bH,bX.length);
}var bU=bY.tbody.children(":not(.k-grouping-row,.k-detail-row)");
if(bY.lockedTable){if(bS>bL){if(bS<=bW){bz(bY.lockedTable.find(">tbody>tr.k-grouping-row"),bY.table.find(">tbody>tr.k-grouping-row"),bX.length);
}}else{if(bS>bW){bz(bY.table.find(">tbody>tr.k-grouping-row"),bY.lockedTable.find(">tbody>tr.k-grouping-row"),bX.length);
}}bT=bY.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)");
}for(var bP=0,bR=bU.length;
bP<bR;
bP+=1){be(X(bT[bP],bU[bP],">td:not(.k-group-cell,.k-hierarchy-cell)"),bW,bL,bH,bX.length);
}},_autoFitLeafColumn:function(bH){this.autoFitColumn(aN(this.columns)[bH]);
},autoFitColumn:function(bJ){var b2=this,bZ=b2.options,bK=b2.columns,bR,b1,bP,bS,b4=b2.lockedHeader?aO(b2.lockedHeader.find(">table>thead")).filter(aB).length:0,bH,bW="col:not(.k-group-col):not(.k-hierarchy-col)",bX="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";
if(typeof bJ=="number"){bJ=bK[bJ];
}else{if(aI(bJ)){bJ=an(af(bK),function(b5){return b5===bJ;
})[0];
}else{bJ=an(af(bK),function(b5){return b5.field===bJ;
})[0];
}}if(!bJ||!aK(bJ)){return;
}bR=az(bJ,aN(bK));
bS=bJ.locked;
if(bS){bP=b2.lockedHeader.children("table");
}else{bP=b2.thead.parent();
}b1=bP.find("[data-index='"+bR+"']");
var bM=bS?b2.lockedTable:b2.table,bN=b2.footer||l();
if(b2.footer&&b2.lockedContent){bN=bS?b2.footer.children(".k-grid-footer-locked"):b2.footer.children(".k-grid-footer-wrap");
}var bO=bN.find("table").first();
if(b2.lockedHeader&&!bS){bR-=b4;
}for(var bT=0;
bT<bK.length;
bT++){if(bK[bT]===bJ){break;
}else{if(bK[bT].hidden){bR--;
}}}if(bZ.scrollable){bH=bP.find(bW).eq(bR).add(bM.children("colgroup").find(bW).eq(bR)).add(bO.find("colgroup").find(bW).eq(bR));
}else{bH=bM.children("colgroup").find(bW).eq(bR);
}var b0=bP.add(bM).add(bO);
var bY=b1.outerWidth();
bH.width("");
b0.css("table-layout","fixed");
bH.width("auto");
b0.addClass("k-autofitting");
b0.css("table-layout","");
var bV=Math.ceil(Math.max(b1.outerWidth(),bM.find("tr:not(.k-grouping-row)").eq(0).children(bX).eq(bR).outerWidth(),bO.find("tr").eq(0).children(bX).eq(bR).outerWidth()))+1;
bH.width(bV);
bJ.width=bV;
if(bZ.scrollable){var bI=bP.find("col"),bL,b3=0;
for(var bQ=0,bU=bI.length;
bQ<bU;
bQ+=1){bL=bI[bQ].style.width;
if(bL&&bL.indexOf("%")==-1){b3+=parseInt(bL,10);
}else{b3=0;
break;
}}if(b3){b0.each(function(){this.style.width=b3+"px";
});
}}if(s.msie&&s.version==8){b0.css("display","inline-table");
setTimeout(function(){b0.css("display","table");
},1);
}b0.removeClass("k-autofitting");
b2.trigger(E,{column:bJ,oldWidth:bY,newWidth:bV});
b2._applyLockedContainersWidth();
b2._syncLockedContentHeight();
b2._syncLockedHeaderHeight();
},reorderColumn:function(bL,bI,bH){var bS=this,bP=A(bI,bS.columns),bJ=bP?bP.columns:bS.columns,bR=az(bI,bJ),bK=bJ[bL],bN,bM=!!bK.locked,bO=aP(bS.columns).length;
if(bR===bL){return;
}if(!bI.locked&&bM&&aZ(bS.columns).length==1){return;
}if(bI.locked&&!bM&&bO==1){return;
}bS._hideResizeHandle();
if(bH===bw){bH=bL<bR;
}var bQ=[bI];
bS._reorderHeader(bQ,bK,bH);
if(bS.lockedHeader){bb(bS.thead);
bb(bS.lockedHeader);
}if(bK.columns){bK=aN(bK.columns);
bK=bK[bH?0:bK.length-1];
}if(bI.columns){bQ=aN(bI.columns);
}bS._reorderContent(bQ,bK,bH);
bN=!!bI.locked;
bN=bN!=bM;
bI.locked=bM;
bJ.splice(bH?bL:bL+1,0,bI);
bJ.splice(bR<bL?bR:bR+1,1);
bS._templates();
bS._updateColumnCellIndex();
bS._updateTablesWidth();
bS._applyLockedContainersWidth();
bS._syncLockedHeaderHeight();
bS._syncLockedContentHeight();
bS._updateFirstColumnClass();
if(!bN){return;
}if(bM){bS.trigger(y,{column:bI});
}else{bS.trigger(H,{column:bI});
}},_updateColumnCellIndex:function(){var bH;
var bI=0;
if(this.lockedHeader){bH=this.lockedHeader.find("thead");
bI=bx(bH,aP(this.columns));
}bx(this.thead,aZ(this.columns),bI);
},lockColumn:function(bH){var bI=this.columns;
if(typeof bH=="number"){bH=bI[bH];
}else{bH=an(bI,function(bK){return bK.field===bH;
})[0];
}if(!bH||bH.locked||bH.hidden){return;
}var bJ=aP(bI).length-1;
this.reorderColumn(bJ,bH,false);
},unlockColumn:function(bH){var bI=this.columns;
if(typeof bH=="number"){bH=bI[bH];
}else{bH=an(bI,function(bK){return bK.field===bH;
})[0];
}if(!bH||!bH.locked||bH.hidden){return;
}var bJ=aP(bI).length;
this.reorderColumn(bJ,bH,true);
},cellIndex:function(bI){var bH=0;
if(this.lockedTable&&!l.contains(this.lockedTable[0],bI[0])){bH=aN(aP(this.columns)).length;
}return l(bI).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(bI)+bH;
},_modelForContainer:function(bH){bH=l(bH);
if(!bH.is("tr")&&this._editMode()!=="popup"){bH=bH.closest("tr");
}var bI=bH.attr(aL.attr("uid"));
return this.dataSource.getByUid(bI);
},_editable:function(){var bL=this,bK=bL.selectable&&bL.selectable.options.multiple,bH=bL.options.editable,bI=function(){var bN=m(),bM=bL._editContainer;
if(bM&&!l.contains(bM[0],bN)&&bM[0]!==bN&&!l(bN).closest(".k-animation-container").length){if(bL.editable.end()){bL.closeCell();
}}};
if(bH){this.wrapper.addClass("k-editable");
var bJ=bL._editMode();
if(bJ==="incell"){if(bH.update!==false){bL.wrapper.on(w+a5,"tr:not(.k-grouping-row) > td",function(bM){var bO=l(this),bN=bL.lockedTable&&bO.closest("table")[0]===bL.lockedTable[0];
if(bO.hasClass("k-hierarchy-cell")||bO.hasClass("k-detail-cell")||bO.hasClass("k-group-cell")||bO.hasClass("k-edit-cell")||bO.has("a.k-grid-delete").length||bO.has("button.k-grid-delete").length||bO.closest("tbody")[0]!==bL.tbody[0]&&!bN||l(bM.target).is(":input")){return;
}if(bL.editable){if(bL.editable.end()){if(bK){l(m()).blur();
}bL.closeCell();
bL.editCell(bO);
}}else{bL.editCell(bO);
}}).on("focusin"+a5,function(){if(!l.contains(this,m())){clearTimeout(bL.timer);
bL.timer=null;
}}).on("focusout"+a5,function(){bL.timer=setTimeout(bI,1);
});
}}else{if(bH.update!==false){bL.wrapper.on(w+a5,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(bM){bM.preventDefault();
bL.editRow(l(this).closest("tr"));
});
}}if(bH.destroy!==false){bL.wrapper.on(w+a5,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(bM){bM.preventDefault();
bM.stopPropagation();
bL.removeRow(l(this).closest("tr"));
});
}else{bL.wrapper.on(w+a5,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(bM){bM.stopPropagation();
if(!bL._confirmation()){bM.preventDefault();
}});
}}},editCell:function(bH){bH=l(bH);
var bK=this,bI=aN(bK.columns)[bK.cellIndex(bH)],bJ=bK._modelForContainer(bH);
bK.closeCell();
if(bJ&&(!bJ.editable||bJ.editable(bI.field))&&!bI.command&&bI.field){bK._attachModelChange(bJ);
bK._editContainer=bH;
bK.editable=bH.addClass("k-edit-cell").kendoEditable({fields:{field:bI.field,format:bI.format,editor:bI.editor,values:bI.values},model:bJ,target:bK,change:function(bM){if(bK.trigger(bf,{values:bM.values,container:bH,model:bJ})){bM.preventDefault();
}}}).data("kendoEditable");
var bL=bH.parent().addClass("k-grid-edit-row");
if(bK.lockedContent){p(bL[0],bK._relatedRow(bL).addClass("k-grid-edit-row")[0]);
}bK.trigger(W,{container:bH,model:bJ});
}},_adjustLockedHorizontalScrollBar:function(){var bJ=this.table,bH=bJ.parent();
var bI=bJ[0].offsetWidth>bH[0].clientWidth?aL.support.scrollbar():0;
this.lockedContent.height(bH.height()-bI);
},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar();
}this._adjustRowsHeight(this.table,this.lockedTable);
}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var bH=this.lockedHeader.children("table");
var bI=this.thead.parent();
this._adjustRowsHeight(bH,bI);
bo(bH,bI);
}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"));
}},_destroyEditable:function(){var bI=this;
var bH=function(){if(bI.editable){var bJ=bI.editView?bI.editView.element:bI._editContainer;
if(bJ){bJ.off(w+a5,"a.k-grid-cancel",bI._editCancelClickHandler);
bJ.off(w+a5,"a.k-grid-update",bI._editUpdateClickHandler);
}bI._detachModelChange();
bI.editable.destroy();
bI.editable=null;
bI._editContainer=null;
bI._destroyEditView();
}};
if(bI.editable){if(bI._editMode()==="popup"&&!bI._isMobile){bI._editContainer.data("kendoWindow").bind("deactivate",bH).close();
}else{bH();
}}if(bI._actionSheet){bI._actionSheet.destroy();
bI._actionSheet=null;
}},_destroyEditView:function(){if(this.editView){this.editView.purge();
this.editView=null;
this.pane.navigate("");
}},_attachModelChange:function(bH){var bI=this;
bI._modelChangeHandler=function(bJ){bI._modelChange({field:bJ.field,model:this});
};
bH.bind("change",bI._modelChangeHandler);
},_detachModelChange:function(){var bJ=this,bH=bJ._editContainer,bI=bJ._modelForContainer(bH);
if(bI){bI.unbind(u,bJ._modelChangeHandler);
}},closeCell:function(bK){var bM=this,bH=bM._editContainer,bJ,bI,bN,bL;
if(!bH){return;
}bJ=bH.closest("tr").attr(aL.attr("uid"));
bL=bM.dataSource.getByUid(bJ);
if(bK&&bM.trigger("cancel",{container:bH,model:bL})){return;
}bH.removeClass("k-edit-cell");
bI=aN(bM.columns)[bM.cellIndex(bH)];
bN=bH.parent().removeClass("k-grid-edit-row");
bM._destroyEditable();
bM._displayCell(bH,bI,bL);
if(bH.hasClass("k-dirty-cell")){l('<span class="k-dirty"/>').prependTo(bH);
}bM.trigger("itemChange",{item:bN,data:bL,ns:bv});
if(bM.lockedContent){p(bN.css("height","")[0],bM._relatedRow(bN).css("height","")[0]);
}},_displayCell:function(bH,bI,bJ){var bM=this,bL={storage:{},count:0},bK=Z({},aL.Template,bM.options.templateSettings),bN=aL.template(bM._cellTmpl(bI,bL),bK);
if(bL.count>0){bN=a8(bN,bL.storage);
}bH.empty().html(bN(bJ));
bM.angular("compile",function(){return{elements:bH,data:[{dataItem:bJ}]};
});
},removeRow:function(bH){if(!this._confirmation(bH)){return;
}this._removeRow(bH);
},_removeRow:function(bJ){var bK=this,bI,bH=bK._editMode();
if(bH!=="incell"){bK.cancelRow();
}bJ=l(bJ);
if(bK.lockedContent){bJ=bJ.add(bK._relatedRow(bJ));
}bJ=bJ.hide();
bI=bK._modelForContainer(bJ);
if(bI&&!bK.trigger(ba,{row:bJ,model:bI})){bK.dataSource.remove(bI);
if(bH==="inline"||bH==="popup"){bK.dataSource.sync();
}}else{if(bH==="incell"){bK._destroyEditable();
}}},_editMode:function(){var bI="incell",bH=this.options.editable;
if(bH!==true){if(typeof bH=="string"){bI=bH;
}else{bI=bH.mode||bI;
}}return bI;
},editRow:function(bK){var bJ;
var bL=this;
if(bK instanceof aL.data.ObservableObject){bJ=bK;
}else{bK=l(bK);
bJ=bL._modelForContainer(bK);
}var bI=bL._editMode();
var bH;
bL.cancelRow();
if(bJ){bK=bL.tbody.children("["+aL.attr("uid")+"="+bJ.uid+"]");
bL._attachModelChange(bJ);
if(bI==="popup"){bL._createPopupEditor(bJ);
}else{if(bI==="inline"){bL._createInlineEditor(bK,bJ);
}else{if(bI==="incell"){l(bK).children(N).each(function(){var bM=l(this);
var bN=aN(bL.columns)[bL.cellIndex(bM)];
bJ=bL._modelForContainer(bM);
if(bJ&&(!bJ.editable||bJ.editable(bN.field))&&bN.field){bL.editCell(bM);
return false;
}});
}}}bH=bL.editView?bL.editView.element:bL._editContainer;
if(bH){if(!this._editCancelClickHandler){this._editCancelClickHandler=a8(this._editCancelClick,this);
}bH.on(w+a5,"a.k-grid-cancel",this._editCancelClickHandler);
if(!this._editUpdateClickHandler){this._editUpdateClickHandler=a8(this._editUpdateClick,this);
}bH.on(w+a5,"a.k-grid-update",this._editUpdateClickHandler);
}}},_editUpdateClick:function(bH){bH.preventDefault();
bH.stopPropagation();
this.saveRow();
},_editCancelClick:function(bJ){var bM=this;
var bL=bM.options.navigatable;
var bK=bM.editable.options.model;
var bH=bM.editView?bM.editView.element:bM._editContainer;
bJ.preventDefault();
bJ.stopPropagation();
if(bM.trigger("cancel",{container:bH,model:bK})){return;
}var bI=bM.items().index(l(bM.current()).parent());
bM.cancelRow();
if(bL){bM._setCurrent(bM.items().eq(bI).children().filter(aV).first());
ai(bM.table,true);
}},_createPopupEditor:function(bS){var bY=this,bP="<div "+aL.attr("uid")+'="'+bS.uid+'" class="k-popup-edit-form'+(bY._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',bJ,bL,bO=[],bQ,bR,bZ,b0,bI,bW,bK=aN(bY.columns),bH,bN=bY.options.editable,bX=bN.template,bT=aI(bN)?bN.window:{},bU=Z({},aL.Template,bY.options.templateSettings);
bT=bT||{};
if(bX){if(typeof bX===bm){bX=window.unescape(bX);
}bP+=aL.template(bX,bU)(bS);
for(bQ=0,bR=bK.length;
bQ<bR;
bQ++){bJ=bK[bQ];
if(bJ.command){bW=am(bJ.command,"edit");
if(bW){bL=bW;
}}}}else{for(bQ=0,bR=bK.length;
bQ<bR;
bQ++){bJ=bK[bQ];
if(!bJ.command){bP+='<div class="k-edit-label"><label for="'+bJ.field+'">'+(bJ.title||bJ.field||"")+"</label></div>";
if((!bS.editable||bS.editable(bJ.field))&&bJ.field){bO.push({field:bJ.field,format:bJ.format,editor:bJ.editor,values:bJ.values});
bP+="<div "+aL.attr("container-for")+'="'+bJ.field+'" class="k-edit-field"></div>';
}else{var bV={storage:{},count:0};
bZ=aL.template(bY._cellTmpl(bJ,bV),bU);
if(bV.count>0){bZ=a8(bZ,bV.storage);
}bP+='<div class="k-edit-field">'+bZ(bS)+"</div>";
}}else{if(bJ.command){bW=am(bJ.command,"edit");
if(bW){bL=bW;
}}}}}if(bL){if(aI(bL)){if(bL.text&&aI(bL.text)){b0=bL.text.update;
bI=bL.text.cancel;
}if(bL.attr){bH=bL.attr;
}}}var bM;
if(!bY._isMobile){bP+='<div class="k-edit-buttons k-state-default">';
bP+=bY._createButton({name:"update",text:b0,attr:bH})+bY._createButton({name:"canceledit",text:bI,attr:bH});
bP+="</div></div></div>";
bM=bY._editContainer=l(bP).appendTo(bY.wrapper).eq(0).kendoWindow(Z({modal:true,resizable:false,draggable:true,title:"Edit",visible:false,close:function(b2){if(b2.userTriggered){b2.sender.element.focus();
if(bY.trigger("cancel",{container:bM,model:bS})){b2.preventDefault();
return;
}var b1=bY.items().index(l(bY.current()).parent());
bY.cancelRow();
if(bY.options.navigatable){bY._setCurrent(bY.items().eq(b1).children().filter(aV).first());
ai(bY.table,true);
}}}},bT));
}else{bP+="</div></div>";
bY.editView=bY.pane.append("<div data-"+aL.ns+'role="view" data-'+aL.ns+'use-native-scrolling="true" data-'+aL.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+aL.ns+'role="header" class="k-header">'+bY._createButton({name:"update",text:b0,attr:bH})+(bT.title||"Edit")+bY._createButton({name:"canceledit",text:bI,attr:bH})+"</div>"+bP+"</div>");
bM=bY._editContainer=bY.editView.element.find(".k-popup-edit-form");
}bY.editable=bY._editContainer.kendoEditable({fields:bO,model:bS,clearContainer:false,target:bY}).data("kendoEditable");
if(bY._isMobile){bM.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){l(this).next().children("input").click();
});
}bY._openPopUpEditor();
bY.trigger(W,{container:bM,model:bS});
},_openPopUpEditor:function(){if(!this._isMobile){this._editContainer.data("kendoWindow").center().open();
}else{this.pane.navigate(this.editView,this._editAnimation);
}},_createInlineEditor:function(bM,bL){var bN=this,bI,bH,bJ,bK=[];
if(bN.lockedContent){bM=bM.add(bN._relatedRow(bM));
}bM.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bH=l(this);
bI=aN(bN.columns)[bN.cellIndex(bH)];
if(!bI.command&&bI.field&&(!bL.editable||bL.editable(bI.field))){bK.push({field:bI.field,format:bI.format,editor:bI.editor,values:bI.values});
bH.attr(aL.attr("container-for"),bI.field);
bH.empty();
}else{if(bI.command){bJ=am(bI.command,"edit");
if(bJ){bH.empty();
var bQ,bP,bO;
if(aI(bJ)){if(bJ.text&&aI(bJ.text)){bQ=bJ.text.update;
bP=bJ.text.cancel;
}if(bJ.attr){bO=bJ.attr;
}}l(bN._createButton({name:"update",text:bQ,attr:bO})+bN._createButton({name:"canceledit",text:bP,attr:bO})).appendTo(bH);
}}}});
bN._editContainer=bM;
bN.editable=new aL.ui.Editable(bM.addClass("k-grid-edit-row"),{target:bN,fields:bK,model:bL,clearContainer:false});
if(bM.length>1){p(bM[0],bM[1]);
bN._applyLockedContainersWidth();
}bN.trigger(W,{container:bM,model:bL});
},cancelRow:function(bJ){var bK=this,bH=bK._editContainer,bI;
if(bH){bI=bK._modelForContainer(bH);
if(bJ&&bK.trigger("cancel",{container:bH,model:bI})){return;
}bK._destroyEditable();
bK.dataSource.cancelChanges(bI);
if(bK._editMode()!=="popup"){bK._displayRow(bH);
}else{bK._displayRow(bK.tbody.find("["+aL.attr("uid")+"="+bI.uid+"]"));
}}},saveRow:function(){var bK=this,bH=bK._editContainer,bJ=bK._modelForContainer(bH),bI=bK.editable;
if(bH&&bI&&bI.end()&&!bK.trigger(bf,{container:bH,model:bJ})){bK.dataSource.sync();
}},_displayRow:function(bP){var bQ=this,bL=bQ._modelForContainer(bP),bO,bM,bN,bK=bP.hasClass("k-state-selected"),bJ=bP.hasClass("k-alt");
if(bL){if(bQ.lockedContent){bO=l((bJ?bQ.lockedAltRowTemplate:bQ.lockedRowTemplate)(bL));
bQ._relatedRow(bP.last()).replaceWith(bO);
}bQ.angular("cleanup",function(){return{elements:bP.get()};
});
bM=l((bJ?bQ.altRowTemplate:bQ.rowTemplate)(bL));
bP.replaceWith(bM);
var bI=bM;
var bH=[{dataItem:bL}];
if(bO&&bO.length){bI=bM.add(bO);
bH.push({dataItem:bL});
}bQ.angular("compile",function(){return{elements:bI.get(),data:bH};
});
if(bK&&bQ.options.selectable){bQ.select(bM.add(bO));
}if(bO){p(bM[0],bO[0]);
}bN=bM.next();
if(bN.hasClass("k-detail-row")&&bN.is(":visible")){bM.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus");
}}},_showMessage:function(bJ,bK){var bM=this;
if(!bM._isMobile){return window.confirm(bJ.title);
}var bL=aL.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>');
var bI=l(bL(bJ)).appendTo(bM.view.element);
var bH=bM._actionSheet=new aL.mobile.ui.ActionSheet(bI,{cancel:bJ.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy();
},command:function(bN){var bO=l(bN.currentTarget).parent();
if(!bO.hasClass("km-actionsheet-cancel")){bM._removeRow(bK);
}},popup:bM._actionSheetPopupOptions});
bH.open(bK);
return false;
},_confirmation:function(bJ){var bK=this,bI=bK.options.editable,bH=bI===true||typeof bI===bm?bK.options.messages.editable.confirmation:bI.confirmation;
if(bH!==false&&bH!=null){if(typeof bH===al){bH=bH(bK._modelForContainer(bJ));
}return bK._showMessage({confirmDelete:bI.confirmDelete||bK.options.messages.editable.confirmDelete,cancelDelete:bI.cancelDelete||bK.options.messages.editable.cancelDelete,title:bH===true?bK.options.messages.editable.confirmation:bH},bJ);
}return true;
},cancelChanges:function(){this.dataSource.cancelChanges();
},saveChanges:function(){var bH=this;
if((bH.editable&&bH.editable.end()||!bH.editable)&&!bH.trigger(bg)){bH.dataSource.sync();
}},addRow:function(){var bR=this,bL,bJ=bR.dataSource,bM=bR._editMode(),bI=bR.options.editable.createAt||"",bO=bJ.pageSize(),bS=bJ.view()||[];
if(bR.editable&&bR.editable.end()||!bR.editable){if(bM!="incell"){bR.cancelRow();
}bL=bJ.indexOf(bS[0]);
if(bI.toLowerCase()=="bottom"){bL+=bS.length;
if(bO&&!bJ.options.serverPaging&&bO<=bS.length){bL-=1;
}}if(bL<0){if(bJ.page()>bJ.totalPages()){bL=(bJ.page()-1)*bO;
}else{bL=0;
}}var bN=bJ.insert(bL,{}),bK=bN.uid,bQ=bR.lockedContent?bR.lockedTable:bR.table,bP=bQ.find("tr["+aL.attr("uid")+"="+bK+"]"),bH=bP.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(bR._firstEditableColumnIndex(bP));
if(bM==="inline"&&bP.length){bR.editRow(bP);
}else{if(bM==="popup"){bR.editRow(bN);
}else{if(bH.length){bR.editCell(bH);
}}}if(bI.toLowerCase()=="bottom"&&bR.lockedContent){bR.lockedContent[0].scrollTop=bR.content[0].scrollTop=bR.table[0].offsetHeight;
}}},_firstEditableColumnIndex:function(bJ){var bN=this,bH,bI=aN(bN.columns),bK,bL,bM=bN._modelForContainer(bJ);
for(bK=0,bL=bI.length;
bK<bL;
bK++){bH=bI[bK];
if(bM&&(!bM.editable||bM.editable(bH.field))&&!bH.command&&bH.field&&bH.hidden!==true){return bK;
}}return -1;
},_toolbar:function(){var bJ=this,bL=bJ.wrapper,bK=bJ.options.toolbar,bI=bJ.options.editable,bH;
if(bK){bH=bJ.wrapper.find(".k-grid-toolbar");
if(!bH.length){if(!aD(bK)){bK=typeof bK===bm?bK:bJ._toolbarTmpl(bK).replace(bt,"\\#");
bK=a8(aL.template(bK),bJ);
}bH=l('<div class="k-header k-grid-toolbar" />').html(bK({})).prependTo(bL);
bJ.angular("compile",function(){return{elements:bH.get()};
});
}if(bI&&bI.create!==false){bH.on(w+a5,".k-grid-add",function(bM){bM.preventDefault();
bJ.addRow();
}).on(w+a5,".k-grid-cancel-changes",function(bM){bM.preventDefault();
bJ.cancelChanges();
}).on(w+a5,".k-grid-save-changes",function(bM){bM.preventDefault();
bJ.saveChanges();
});
}bH.on(w+a5,".k-grid-excel",function(bM){bM.preventDefault();
bJ.saveAsExcel();
});
bH.on(w+a5,".k-grid-pdf",function(bM){bM.preventDefault();
bJ.saveAsPDF();
});
}},_toolbarTmpl:function(bH){var bL=this,bJ,bK,bI="";
if(aA(bH)){for(bJ=0,bK=bH.length;
bJ<bK;
bJ++){bI+=bL._createButton(bH[bJ]);
}}return bI;
},_createButton:function(bJ){var bN=bJ.template||J,bK=typeof bJ===bm?bJ:bJ.name||bJ.text,bI=Q[bK]?Q[bK].className:"k-grid-"+(bK||"").replace(/\s/g,""),bM={className:bI,text:bK,imageClass:"",attr:"",iconClass:""},bL=this.options.messages.commands,bH;
if(!bK&&!(aI(bJ)&&bJ.template)){throw new Error("Custom commands should have name specified");
}if(aI(bJ)){bJ=Z(true,{},bJ);
if(bJ.className&&az(bM.className,bJ.className.split(" "))<0){bJ.className+=" "+bM.className;
}else{if(bJ.className===bw){bJ.className=bM.className;
}}if(bK==="edit"&&aI(bJ.text)){bJ=Z(true,{},bJ);
bJ.text=bJ.text.edit;
}if(bJ.attr){if(aI(bJ.attr)){bJ.attr=bn(bJ.attr);
}if(typeof bJ.attr===bm){bH=bJ.attr.match(/class="(.+?)"/);
if(bH&&az(bH[1],bJ.className.split(" "))<0){bJ.className+=" "+bH[1];
}}}bM=Z(true,bM,Q[bK],{text:bL[bK]},bJ);
}else{bM=Z(true,bM,Q[bK],{text:bL[bK]});
}return aL.template(bN)(bM);
},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0;
},_groupable:function(){var bH=this;
if(bH._groupableClickHandler){bH.table.add(bH.lockedTable).off(w+a5,bH._groupableClickHandler);
}else{bH._groupableClickHandler=function(bI){var bJ=l(this),bK=bJ.closest("tr");
if(bJ.hasClass("k-i-collapse")){bH.collapseGroup(bK);
}else{bH.expandGroup(bK);
}bI.preventDefault();
bI.stopPropagation();
};
}if(bH._isLocked()){bH.lockedTable.on(w+a5,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bH._groupableClickHandler);
}else{bH.table.on(w+a5,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bH._groupableClickHandler);
}bH._attachGroupable();
},_attachGroupable:function(){var bK=this,bL=bK.wrapper,bJ=bK.options.groupable,bH=av+"["+aL.attr("field")+"]",bI=bK.content?".k-grid-header:first "+bH:"table:first>.k-grid-header "+bH;
if(bJ&&bJ.enabled!==false){if(!bL.has("div.k-grouping-header")[0]){l("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(bL);
}if(bK.groupable){bK.groupable.destroy();
}bK.groupable=new bv.Groupable(bL,Z({},bJ,{draggable:bK._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:bK.dataSource,draggableElements:bI,filter:bI,allowDrag:bK.options.reorderable}));
}},_continuousItems:function(bK,bH){if(!this.lockedContent){return;
}var bQ=this;
var bJ=bQ.table.add(bQ.lockedTable);
var bM=l(bK,bJ[0]);
var bO=l(bK,bJ[1]);
var bI=bH?aP(bQ.columns).length:1;
var bN=bH?bQ.columns.length-bI:1;
var bP=[];
for(var bL=0;
bL<bM.length;
bL+=bI){a9.apply(bP,bM.slice(bL,bL+bI));
a9.apply(bP,bO.splice(0,bN));
}return bP;
},_selectable:function(){var bO=this,bL,bH,bM=[],bK=bO._isLocked(),bN=bO.options.selectable;
if(bN){if(bO.selectable){bO.selectable.destroy();
}bN=aL.ui.Selectable.parseOptions(bN);
bL=bN.multiple;
bH=bN.cell;
if(bO._hasDetails()){bM[bM.length]=".k-detail-row";
}if(bO.options.groupable||bO._hasFooters()){bM[bM.length]=".k-grouping-row,.k-group-footer";
}bM=bM.join(",");
if(bM!==""){bM=":not("+bM+")";
}var bI=bO.table;
if(bK){bI=bI.add(bO.lockedTable);
}var bJ=">"+(bH?bi:"tbody>tr"+bM);
bO.selectable=new aL.ui.Selectable(bI,{filter:bJ,aria:true,multiple:bL,change:function(){bO.trigger(u);
},useAllItems:bK&&bL&&bH,relatedTarget:function(bQ){if(bH||!bK){return;
}var bS;
var bT=l();
for(var bP=0,bR=bQ.length;
bP<bR;
bP++){bS=bO._relatedRow(bQ[bP]);
if(az(bS[0],bQ)<0){bT=bT.add(bS);
}}return bT;
},continuousItems:function(){return bO._continuousItems(bJ,bH);
}});
if(bO.options.navigatable){bI.on("keydown"+a5,function(bQ){var bP=bO.current();
var bR=bQ.target;
if(bQ.keyCode===aM.SPACEBAR&&l.inArray(bR,bI)>-1&&!bP.is(".k-edit-cell,.k-header")&&bP.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){bQ.preventDefault();
bQ.stopPropagation();
bP=bH?bP:bP.parent();
if(bK&&!bH){bP=bP.add(bO._relatedRow(bP));
}if(bL){if(!bQ.ctrlKey){bO.selectable.clear();
}else{if(bP.hasClass(bh)){bP.removeClass(bh);
bO.trigger(u);
return;
}}}else{bO.selectable.clear();
}bO.selectable.value(bP);
}});
}}},_clipboard:function(){var bI=this.options;
var bJ=bI.selectable;
if(bJ&&bI.allowCopy){var bH=this;
if(!bI.navigatable){bH.table.add(bH.lockedTable).attr("tabindex",0).on("mousedown"+a5+" keydown"+a5,".k-detail-cell",function(bK){if(bK.target!==bK.currentTarget){bK.stopImmediatePropagation();
}}).on("mousedown"+a5,aX+">"+aV,a8(bq,bH));
}bH.copyHandler=a8(bH.copySelection,bH);
bH.updateClipBoardState=function(){if(bH.areaClipBoard){bH.areaClipBoard.val(bH.getTSV()).focus().select();
}};
bH.bind("change",bH.updateClipBoardState);
bH.wrapper.on("keydown",bH.copyHandler);
bH.clearAreaHandler=a8(bH.clearArea,bH);
bH.wrapper.on("keyup",bH.clearAreaHandler);
}},copySelection:function(bH){if(bH instanceof g.Event&&!(bH.ctrlKey||bH.metaKey)||l(bH.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text){return;
}if(!this.areaClipBoard){this.areaClipBoard=l("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper);
}this.areaClipBoard.val(this.getTSV()).focus().select();
},getTSV:function(){var bK=this;
var bQ=bK.select();
var bJ="\t";
var bH=bK.options.allowCopy;
var bN=true;
if(l.isPlainObject(bH)&&bH.delimeter){bJ=bH.delimeter;
}var bR="";
if(bQ.length){if(bQ.eq(0).is("tr")){bQ=bQ.find("td:not(.k-group-cell)");
}if(bN){bQ.filter(":visible");
}var bO=[];
var bI=this.columns.length;
var bM=bK._isLocked()&&aP(bK.columns).length;
var bL=true;
l.each(bQ,function(bV,bS){bS=l(bS);
var bX=bS.closest("tr");
var bW=bX.index();
var bT=bS.index();
if(bN){bT-=bS.prevAll(":hidden").length;
}if(bM&&bL){bL=l.contains(bK.lockedTable[0],bS[0]);
}if(bK._groups()&&bL){bT-=bK._groups();
}bT=bL?bT:bT+bM;
if(bI>bT){bI=bT;
}var bU=bS.text();
if(!bO[bW]){bO[bW]=[];
}bO[bW][bT]=bU;
});
var bP=bO.length;
bO=l.each(bO,function(bS,bT){if(bT){bO[bS]=bT.slice(bI);
if(bP>bS){bP=bS;
}}});
l.each(bO.slice(bP),function(bS,bT){if(bT){bR+=bT.join(bJ)+"\r\n";
}else{bR+="\r\n";
}});
}return bR;
},clearArea:function(bH){var bI;
if(this.areaClipBoard&&bH&&bH.target===this.areaClipBoard[0]){if(this.options.navigatable){bI=l(this.current()).closest("table");
}else{bI=this.table;
}ai(bI,true);
}if(this.areaClipBoard){this.areaClipBoard.remove();
this.areaClipBoard=null;
}},_minScreenSupport:function(){var bH=this.hideMinScreenCols();
if(bH){this.minScreenResizeHandler=a8(this.hideMinScreenCols,this);
l(window).on("resize",this.minScreenResizeHandler);
}},hideMinScreenCols:function(){var bH=this.columns,bI=window.innerWidth>0?window.innerWidth:screen.width;
return this._iterateMinScreenCols(bH,bI);
},_iterateMinScreenCols:function(bJ,bM){var bH=false;
for(var bK=0;
bK<bJ.length;
bK++){var bI=bJ[bK];
var bL=bI.minScreenWidth;
if(bL!==bw&&bL!==null){bH=true;
if(bL>bM){this.hideColumn(bI);
}else{this.showColumn(bI);
}}if(!bI.hidden&&bI.columns){bH=this._iterateMinScreenCols(bI.columns,bM)||bH;
}}return bH;
},_relatedRow:function(bJ){var bI=this.lockedTable;
bJ=l(bJ);
if(!bI){return bJ;
}var bK=bJ.closest(this.table.add(this.lockedTable));
var bH=bK.find(">tbody>tr").index(bJ);
bK=bK[0]===this.table[0]?bI:this.table;
return bK.find(">tbody>tr").eq(bH);
},clearSelection:function(){var bH=this;
bH.selectable.clear();
bH.trigger(u);
},select:function(bH){var bJ=this,bI=bJ.selectable;
bH=bJ.table.add(bJ.lockedTable).find(bH);
if(bH.length){if(!bI.options.multiple){bI.clear();
bH=bH.first();
}if(bJ._isLocked()){bH=bH.add(bH.map(function(){return bJ._relatedRow(this);
}));
}bI.value(bH);
return;
}return bI.value();
},_updateCurrentAttr:function(bI,bK){var bJ=l(bI).data("headerId");
l(bI).removeClass(ah).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant");
if(bJ){bJ=bJ.replace(this._cellId,"");
l(bI).attr("id",bJ);
}else{l(bI).removeAttr("id");
}bK.data("headerId",bK.attr("id")).attr("id",this._cellId).addClass(ah).closest("table").attr("aria-activedescendant",this._cellId);
if(!bK.closest("tr").hasClass("k-grouping-row")&&!bK.hasClass("k-header")){var bH=this.columns[this.cellIndex(bK)];
if(bH){bJ=bH.headerAttributes.id;
}bK.attr("aria-describedby",bJ+" "+this._cellId);
}else{bK.attr("aria-describedby",this._cellId);
}this._current=bK;
},_scrollCurrent:function(){var bH=this._current;
var bM=this.options.scrollable;
if(!bH||!bM){return;
}var bK=bH.parent();
var bO=bK.closest("table").parent();
var bJ=bO.is(".k-grid-content-locked,.k-grid-header-locked");
var bI=bO.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");
var bN=l(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0];
if(bI){if(bM.virtual){var bL=Math.max(az(bK[0],this._items(bK.parent())),0);
this._rowVirtualIndex=this.virtualScrollable.itemIndex(bL);
this.virtualScrollable.scrollIntoView(bK);
}else{this._scrollTo(this._relatedRow(bK)[0],bN);
}}if(this.lockedContent){this.lockedContent[0].scrollTop=bN.scrollTop;
}if(!bJ){this._scrollTo(bH[0],bN);
}},current:function(bH){return this._setCurrent(bH,true);
},_setCurrent:function(bI,bJ){var bH=this._current;
bI=l(bI);
if(bI.length){if(!bH||bH[0]!==bI[0]){this._updateCurrentAttr(bH,bI);
this._scrollCurrent();
if(!bJ){this.trigger(aW,{element:bI});
}}}return this._current;
},_removeCurrent:function(){if(this._current){this._current.removeClass(ah);
this._current=null;
}},_scrollTo:function(bL,bI){var bO=bL.tagName.toLowerCase();
var bR=bO==="td"||bO==="th";
var bM=bL[bR?"offsetLeft":"offsetTop"];
var bN=bL[bR?"offsetWidth":"offsetHeight"];
var bK=bI[bR?"scrollLeft":"scrollTop"];
var bJ=bI[bR?"clientWidth":"clientHeight"];
var bH=bM+bN;
var bS=0;
var bQ=0;
var bP=0;
if(aJ&&bR){var bT=l(bL).closest("table")[0];
if(s.msie){bQ=bT.offsetLeft;
}else{if(s.mozilla){bP=bT.offsetLeft-aL.support.scrollbar();
}}}bK=Math.abs(bK+bQ-bP);
if(bK>bM){bS=bM;
}else{if(bH>bK+bJ){if(bN<=bJ){bS=bH-bJ;
}else{bS=bM;
}}else{bS=bK;
}}bS=Math.abs(bS+bQ)+bP;
bI[bR?"scrollLeft":"scrollTop"]=bS;
},_navigatable:function(){var bK=this;
if(!bK.options.navigatable){return;
}var bH=bK.table.add(bK.lockedTable);
var bI=bK.thead.parent().add(l(">table",bK.lockedHeader));
var bJ=bH;
if(bK.options.scrollable){bJ=bJ.add(bI);
bI.attr(bp,-1);
}this._navigatableTables=bJ;
bJ.off("mousedown"+a5+" focus"+a5+" focusout"+a5+" keydown"+a5);
bI.on("keydown"+a5,a8(bK._openHeaderMenu,bK)).find("a.k-link").attr("tabIndex",-1);
bH.attr(bp,aS.max(bH.attr(bp)||0,0)).on("mousedown"+a5+" keydown"+a5,".k-detail-cell",function(bL){if(bL.target!==bL.currentTarget){bL.stopImmediatePropagation();
}});
bJ.on(aL.support.touch?"touchstart"+a5:"mousedown"+a5,aX+">"+aV,a8(bq,bK)).on("focus"+a5,a8(bK._tableFocus,bK)).on("focusout"+a5,a8(bK._tableBlur,bK)).on("keydown"+a5,a8(bK._tableKeyDown,bK));
},_openHeaderMenu:function(bH){if(bH.altKey&&bH.keyCode==aM.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();
bH.stopImmediatePropagation();
}},_setTabIndex:function(bH){this._navigatableTables.attr(bp,-1);
bH.attr(bp,0);
},_tableFocus:function(bI){if(aL.support.touch){return;
}var bH=this.current();
var bJ=l(bI.currentTarget);
if(bH&&bH.is(":visible")){bH.addClass(ah);
}else{this._setCurrent(bJ.find(ae));
}this._setTabIndex(bJ);
},_tableBlur:function(){var bH=this.current();
if(bH){bH.removeClass(ah);
}},_tableKeyDown:function(bJ){var bI=this.current();
var bL=this.virtualScrollable&&this.virtualScrollable.fetching();
var bM=l(bJ.target);
var bH=!bJ.isDefaultPrevented()&&!bM.is(":button,a,:input,a>.k-icon");
if(bL){bJ.preventDefault();
return;
}bI=bI?bI:l(this.lockedTable).add(this.table).find(ae);
if(!bI.length){return;
}var bK=false;
if(bH&&bJ.keyCode==aM.UP){bK=this._moveUp(bI);
}if(bH&&bJ.keyCode==aM.DOWN){bK=this._moveDown(bI);
}if(bH&&bJ.keyCode==(aJ?aM.LEFT:aM.RIGHT)){bK=this._moveRight(bI,bJ.altKey);
}if(bH&&bJ.keyCode==(aJ?aM.RIGHT:aM.LEFT)){bK=this._moveLeft(bI,bJ.altKey);
}if(bH&&bJ.keyCode==aM.PAGEDOWN){bK=this._handlePageDown();
}if(bH&&bJ.keyCode==aM.PAGEUP){bK=this._handlePageUp();
}if(bJ.keyCode==aM.ENTER||bJ.keyCode==aM.F2){bK=this._handleEnterKey(bI,bJ.currentTarget,bM);
}if(bJ.keyCode==aM.ESC){bK=this._handleEscKey(bI,bJ.currentTarget);
}if(bJ.keyCode==aM.TAB){bK=this._handleTabKey(bI,bJ.currentTarget,bJ.shiftKey);
}if(bK){bJ.preventDefault();
bJ.stopPropagation();
}},_moveLeft:function(bJ,bH){var bL,bK;
var bM=bJ.parent();
var bI=bM.parent();
if(bH){this.collapseRow(bM);
}else{bK=bI.find(aX).index(bM);
bL=this._prevHorizontalCell(bI,bJ,bK);
if(!bL[0]){bI=this._horizontalContainer(bI);
bL=this._prevHorizontalCell(bI,bJ,bK);
if(bL[0]!==bJ[0]){ai(bI.parent(),true);
}}this._setCurrent(bL);
}return true;
},_moveRight:function(bJ,bH){var bL,bK;
var bM=bJ.parent();
var bI=bM.parent();
if(bH){this.expandRow(bM);
}else{bK=bI.find(aX).index(bM);
bL=this._nextHorizontalCell(bI,bJ,bK);
if(!bL[0]){bI=this._horizontalContainer(bI,true);
bL=this._nextHorizontalCell(bI,bJ,bK);
if(bL[0]!==bJ[0]){ai(bI.parent(),true);
}}this._setCurrent(bL);
}return true;
},_moveUp:function(bI){var bH=bI.parent().parent();
var bJ=this._prevVerticalCell(bH,bI);
if(!bJ[0]){bH=this._verticalContainer(bH,true);
bJ=this._prevVerticalCell(bH,bI);
if(bJ[0]){ai(bH.parent(),true);
}}this._setCurrent(bJ);
return true;
},_moveDown:function(bI){var bH=bI.parent().parent();
var bJ=this._nextVerticalCell(bH,bI);
if(!bJ[0]){bH=this._verticalContainer(bH);
bJ=this._nextVerticalCell(bH,bI);
if(bJ[0]){ai(bH.parent(),true);
}}this._setCurrent(bJ);
return true;
},_handlePageDown:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()+1);
return true;
},_handlePageUp:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()-1);
return true;
},_handleTabKey:function(bI,bJ,bL){var bK=this.options.editable&&this._editMode()=="incell";
var bH;
if(!bK||bI.is("th")){return false;
}bH=l(m()).closest(".k-edit-cell");
if(bH[0]&&bH[0]!==bI[0]){bI=bH;
}bH=this._tabNext(bI,bJ,bL);
if(bH.length){this._handleEditing(bI,bH,bH.closest("table"));
return true;
}return false;
},_handleEscKey:function(bI,bK){var bH=m();
var bL=this._editMode()=="incell";
if(!aG(bI)){if(bI.has(bH).length){ai(bK,true);
return true;
}return false;
}if(bL){this.closeCell(true);
}else{var bJ=l(bI).parent().index();
if(bH){bH.blur();
}this.cancelRow(true);
if(bJ>=0){this._setCurrent(this.items().eq(bJ).children(aV).first());
}}if(s.msie&&s.version<9){document.body.focus();
}ai(bK,true);
return true;
},_toggleCurrent:function(bH,bI){var bJ=bH.parent();
if(bJ.is(".k-grouping-row")){bJ.find(".k-icon:first").click();
return true;
}if(!bI&&bJ.is(".k-master-row")){bJ.find(".k-icon:first").click();
return true;
}return false;
},_handleEnterKey:function(bI,bJ,bM){var bK=this.options.editable;
var bH=bM.closest("[role=gridcell]");
if(!bM.is("table")&&!l.contains(bI[0],bM[0])){bI=bH;
}if(bI.is("th")){bI.find(".k-link").click();
return true;
}if(this._toggleCurrent(bI,bK)){return true;
}var bL=bI.find(":kendoFocusable:first");
if(bL[0]&&!bI.hasClass("k-edit-cell")&&bI.hasClass("k-state-focused")){bL.focus();
return true;
}if(bK&&!bM.is(":button,.k-button,textarea")){if(!bH[0]){bH=bI;
}this._handleEditing(bH,false,bJ);
return true;
}return false;
},_nextHorizontalCell:function(bN,bI,bK){var bH=bI.nextAll(N);
if(!bH.length){var bM=bN.find(aX);
var bL=bM.index(bI.parent());
if(bL==-1){if(bI.hasClass("k-header")){var bJ=[];
aR([aP(this.columns)[0]],v(bM.eq(0).children().first()),bJ,0,0);
if(bJ[bK]){return bJ[bK][0];
}return bI;
}if(bI.parent().hasClass("k-filter-row")){return bM.last().children(N).first();
}return bM.eq(bK).children(N).first();
}}return bH.first();
},_prevHorizontalCell:function(bO,bJ,bL){var bH=bJ.prevAll(N);
if(!bH.length){var bN=bO.find(aX);
var bM=bN.index(bJ.parent());
if(bM==-1){if(bJ.hasClass("k-header")){var bK=[];
var bI=aP(this.columns);
aR([bI[bI.length-1]],v(bN.eq(0).children().last()),bK,0,0);
if(bK[bL]){return bK[bL][0];
}return bJ;
}if(bJ.parent().hasClass("k-filter-row")){return bN.last().children(N).last();
}return bN.eq(bL).children(N).last();
}}return bH.first();
},_currentDataIndex:function(bK,bH){var bI=bH.attr("data-index");
if(!bI){return bw;
}var bJ=aP(this.columns).length;
if(bJ&&!bK.closest("div").hasClass("k-grid-content-locked")[0]){return bI-bJ;
}return bI;
},_prevVerticalCell:function(bI,bJ){var bH;
var bL=bJ.parent();
var bN=bI.children(aX);
var bM=bN.index(bL);
var bK=this._currentDataIndex(bI,bJ);
if(bK||bJ.hasClass("k-header")){bH=a6(bJ);
return bH.eq(bH.length-2);
}bK=bL.children(N).index(bJ);
if(bL.hasClass("k-filter-row")){return aO(bI).eq(bK);
}if(bM==-1){bL=bI.find(".k-filter-row");
if(!bL[0]){return aO(bI).eq(bK);
}}else{bL=bM===0?l():bN.eq(bM-1);
}bH=bL.children(N);
if(bH.length>bK){return bH.eq(bK);
}return bH.eq(0);
},_nextVerticalCell:function(bI,bJ){var bH;
var bL=bJ.parent();
var bN=bI.children(aX);
var bM=bN.index(bL);
var bK=this._currentDataIndex(bI,bJ);
if(bM!=-1&&bK===bw&&bJ.hasClass("k-header")){return v(bJ).eq(1);
}bK=bK?parseInt(bK,10):bL.children(N).index(bJ);
if(bM==-1){bL=bN.eq(0);
}else{bL=bN.eq(bM+bJ[0].rowSpan);
}bH=bL.children(N);
if(bH.length>bK){return bH.eq(bK);
}return bH.eq(0);
},_verticalContainer:function(bH,bM){var bL=bH.parent();
var bJ=this._navigatableTables.length;
var bK=Math.floor(bJ/2);
var bI=az(bL[0],this._navigatableTables);
if(bM){bK*=-1;
}bI+=bK;
if(bI>=0||bI<bJ){bL=this._navigatableTables.eq(bI);
}return bL.find(bM?"thead":"tbody");
},_horizontalContainer:function(bH,bK){var bJ=this._navigatableTables.length;
if(bJ<=2){return bH;
}var bL=bH.parent();
var bI=az(bL[0],this._navigatableTables);
bI+=bK?1:-1;
if(bK&&(bI==2||bI==bJ)){return bH;
}if(!bK&&(bI==1||bI<0)){return bH;
}return this._navigatableTables.eq(bI).find("thead, tbody");
},_tabNext:function(bI,bJ,bH){var bL=true;
var bK=bH?bI.prevAll(N+":first"):bI.nextAll(":visible:first");
if(!bK.length){bK=bI.parent();
if(this.lockedTable){bL=bH&&bJ==this.lockedTable[0]||!bH&&bJ==this.table[0];
bK=this._relatedRow(bK);
}if(bL){bK=bK[bH?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first");
}bK=bK.children(N+(bH?":last":":first"));
}return bK;
},_handleEditing:function(bI,bO,bQ){var bR=this,bH=l(m()),bN=bR._editMode(),bM=s.msie,bP=bM&&s.version<9,bJ=bR._editContainer,bK,bL;
bQ=l(bQ);
if(bN=="incell"){bL=bI.hasClass("k-edit-cell");
}else{bL=bI.parent().hasClass("k-grid-edit-row");
}if(bR.editable){if(l.contains(bJ[0],bH[0])){if(s.opera||bP){bH.blur().change().triggerHandler("blur");
}else{bH.blur();
if(bM){bH.blur();
}}}if(!bR.editable){ai(bQ);
return;
}if(bR.editable.end()){if(bN=="incell"){bR.closeCell();
}else{bR.saveRow();
bL=true;
}}else{if(bN=="incell"){bR._setCurrent(bJ);
}else{bR._setCurrent(bJ.children().filter(N).first());
}bK=bJ.find(":kendoFocusable:first")[0];
if(bK){bK.focus();
}return;
}}if(bO){bR._setCurrent(bO);
}if(bP){document.body.focus();
}ai(bQ,true);
if(!bL&&!bO||bO){if(bN=="incell"){bR.editCell(bR.current());
}else{bR.editRow(bR.current().parent());
}}},_wrapper:function(){var bJ=this,bI=bJ.table,bH=bJ.options.height,bK=bJ.element;
if(!bK.is("div")){bK=bK.wrap("<div/>").parent();
}bJ.wrapper=bK.addClass("k-grid k-widget");
if(bH){bJ.wrapper.css(aw,bH);
bI.css(aw,"auto");
}bJ._initMobile();
},_initMobile:function(){var bI=this.options;
var bJ=this;
this._isMobile=bI.mobile===true&&aL.support.mobileOS||bI.mobile==="phone"||bI.mobile==="tablet";
if(this._isMobile){var bH=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+aL.ns+'stretch="true" data-'+aL.ns+'role="view" data-'+aL.ns+'init-widgets="false"></div>').parent();
this.pane=aL.mobile.ui.Pane.wrap(bH);
this.view=this.pane.view();
this._actionSheetPopupOptions=l(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"};
if(bI.height){this.pane.element.parent().css(aw,bI.height);
}this._editAnimation="slide";
this.view.bind("show",function(){if(bJ._isLocked()){bJ._updateTablesWidth();
bJ._applyLockedContainersWidth();
bJ._syncLockedContentHeight();
bJ._syncLockedHeaderHeight();
bJ._syncLockedFooterHeight();
}});
}},_tbody:function(){var bJ=this,bH=bJ.table,bI;
bI=bH.find(">tbody");
if(!bI.length){bI=l("<tbody/>").appendTo(bH);
}bJ.tbody=bI.attr("role","rowgroup");
},_scrollable:function(){var bO=this,bJ,bN,bK=bO.options,bL=bK.scrollable,bI=bL!==true&&bL.virtual&&!bO.virtualScrollable,bM=!aL.support.kineticScrollNeeded||bI?aL.support.scrollbar():0;
if(bL){bJ=bO.wrapper.children(".k-grid-header");
if(!bJ[0]){bJ=l('<div class="k-grid-header" />').insertBefore(bO.table);
}bJ.css(aJ?"padding-left":"padding-right",bL.virtual?bM+1:bM);
bN=l('<table role="grid" />');
if(aE){bN.attr("cellspacing",0);
}bN.width(bO.table[0].style.width);
bN.append(bO.thead);
bJ.empty().append(l('<div class="k-grid-header-wrap k-auto-scrollable" />').append(bN));
bO.content=bO.table.parent();
if(bO.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")){bO.content=bO.content.parent();
}if(!bO.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){bO.content=bO.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent();
}if(bI){bO.virtualScrollable=new bA(bO.content,{dataSource:bO.dataSource,itemHeight:function(){return bO._averageRowHeight();
}});
}bO.scrollables=bJ.children(".k-grid-header-wrap").add(bO.content);
var bH=bO.wrapper.find(".k-grid-footer");
if(bH.length){bO.scrollables=bO.scrollables.add(bH.children(".k-grid-footer-wrap"));
}if(bL.virtual){bO.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+a5).bind("scroll"+a5,function(){bO.scrollables.scrollLeft(this.scrollLeft);
if(bO.lockedContent){bO.lockedContent[0].scrollTop=this.scrollTop;
}});
}else{bO.scrollables.unbind("scroll"+a5).bind("scroll"+a5,function(bQ){bO.scrollables.not(bQ.currentTarget).scrollLeft(this.scrollLeft);
if(bO.lockedContent&&bQ.currentTarget==bO.content[0]){bO.lockedContent[0].scrollTop=this.scrollTop;
}});
var bP=bO.content.data("kendoTouchScroller");
if(bP){bP.destroy();
}bP=aL.touchScroller(bO.content);
if(bP&&bP.movable){bO.touchScroller=bP;
bP.movable.bind("change",function(bQ){bO.scrollables.scrollLeft(-bQ.sender.x);
if(bO.lockedContent){bO.lockedContent.scrollTop(-bQ.sender.y);
}});
bO.one(O,function(bQ){bQ.sender.wrapper.addClass("k-grid-backface");
});
}}}},_renderNoRecordsContent:function(){var bI=this;
if(bI.options.noRecords){var bH=bI.table.parent().children("."+a1);
if(bH.length){bH.remove();
}if(!bI.dataSource||!bI.dataSource.view().length){l(bI.noRecordsTemplate({})).insertAfter(bI.table);
}}},_setContentWidth:function(bL){var bM=this,bJ="k-grid-content-expander",bI='<div class="'+bJ+'"></div>',bK=bM.resizable,bH;
if(bM.options.scrollable&&bM.wrapper.is(":visible")){bH=bM.table.parent().children("."+bJ);
bM._setContentWidthHandler=a8(bM._setContentWidth,bM);
if(!bM.dataSource||!bM.dataSource.view().length){if(!bH[0]){bH=l(bI).appendTo(bM.table.parent());
if(bK){bK.bind("resize",bM._setContentWidthHandler);
}}if(bM.thead){bH.width(bM.thead.width());
if(bL){bM.content.scrollLeft(bL);
}}}else{if(bH[0]){bH.remove();
if(bK){bK.unbind("resize",bM._setContentWidthHandler);
}}}bM._applyLockedContainersWidth();
if(bM.lockedHeader&&bM.table[0].clientWidth===0){bM.table[0].style.width="1px";
}}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var bL=this.thead.parent(),bM=bL.parent(),bI=this.wrapper[0].clientWidth,bK=this._groups(),bP=aL.support.scrollbar(),bH=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bN=bL.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bQ=G(bH),bO=G(bN),bJ;
if(bK>0){bQ+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*bK;
}if(bQ>=bI){bQ=bI-3*bP;
}this.lockedHeader.add(this.lockedContent).width(bQ);
bM[0].style.width=bM.parent().width()-bQ-2+"px";
bL.add(this.table).width(bO);
if(this.virtualScrollable){bI-=bP;
}this.content[0].style.width=bI-bQ-2+"px";
if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(bQ);
bJ=this.footer.find(".k-grid-footer-wrap");
bJ[0].style.width=bM[0].clientWidth+"px";
bJ.children().first().width(bO);
}}},_setContentHeight:function(){var bM=this,bK=bM.options,bI=bM.wrapper.innerHeight(),bH=bM.wrapper.children(".k-grid-header"),bL=aL.support.scrollbar();
if(bK.scrollable&&bM.wrapper.is(":visible")){bI-=bH.outerHeight();
if(bM.pager){bI-=bM.pager.element.outerHeight();
}if(bK.groupable){bI-=bM.wrapper.children(".k-grouping-header").outerHeight();
}if(bK.toolbar){bI-=bM.wrapper.children(".k-grid-toolbar").outerHeight();
}if(bM.footerTemplate){bI-=bM.wrapper.children(".k-grid-footer").outerHeight();
}var bJ=function(bN){var bO,bP;
if(bN[0].style.height){return true;
}else{bO=bN.height();
}bN.height("auto");
bP=bN.height();
if(bO!=bP){bN.height("");
return true;
}bN.height("");
return false;
};
if(bJ(bM.wrapper)){if(bI>bL*2){if(bM.lockedContent){bL=bM.table[0].offsetWidth>bM.table.parent()[0].clientWidth?bL:0;
bM.lockedContent.height(bI-bL);
}bM.content.height(bI);
}else{bM.content.height(bL*2+1);
}}}},_averageRowHeight:function(){var bK=this,bI=bK._items(bK.tbody).length,bJ=bK._rowHeight;
if(bI===0){return bJ;
}if(!bK._rowHeight){bK._rowHeight=bJ=bK.table.outerHeight()/bI;
bK._sum=bJ;
bK._measures=1;
}var bH=bK.table.outerHeight()/bI;
if(bJ!==bH){bK._measures++;
bK._sum+=bH;
bK._rowHeight=bK._sum/bK._measures;
}return bJ;
},_dataSource:function(){var bK=this,bI=bK.options,bJ,bH=bI.dataSource;
bH=aA(bH)?{data:bH}:bH;
if(aI(bH)){Z(bH,{table:bK.table,fields:bK.columns});
bJ=bI.pageable;
if(aI(bJ)&&bJ.pageSize!==bw){bH.pageSize=bJ.pageSize;
}}if(bK.dataSource&&bK._refreshHandler){bK.dataSource.unbind(u,bK._refreshHandler).unbind(a7,bK._progressHandler).unbind(Y,bK._errorHandler);
}else{bK._refreshHandler=a8(bK.refresh,bK);
bK._progressHandler=a8(bK._requestStart,bK);
bK._errorHandler=a8(bK._error,bK);
}bK.dataSource=P.create(bH).bind(u,bK._refreshHandler).bind(a7,bK._progressHandler).bind(Y,bK._errorHandler);
},_error:function(){this._progress(false);
},_requestStart:function(){this._progress(true);
},_modelChange:function(bL){var bX=this,bW=bX.tbody,bQ=bL.model,bT=bX.tbody.find("tr["+aL.attr("uid")+"="+bQ.uid+"]"),bS,bI,bK,bN=bT.hasClass("k-alt"),bY,bM=bX._items(bW).index(bT),bO=bX.lockedContent,bU,bV,bJ,bR,bP;
if(bO){bS=bX._relatedRow(bT);
}if(bT.add(bS).children(".k-edit-cell").length&&!bX.options.rowTemplate){bT.add(bS).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bI=l(this);
bK=aN(bX.columns)[bX.cellIndex(bI)];
if(bK.field===bL.field){if(!bI.hasClass("k-edit-cell")){bX._displayCell(bI,bK,bQ);
l('<span class="k-dirty"/>').prependTo(bI);
}else{bI.addClass("k-dirty-cell");
}}});
}else{if(!bT.hasClass("k-grid-edit-row")){bV=l().add(bT);
if(bO){bY=(bN?bX.lockedAltRowTemplate:bX.lockedRowTemplate)(bQ);
bV=bV.add(bS);
bS.replaceWith(bY);
}bX.angular("cleanup",function(){return{elements:bV.get()};
});
bY=(bN?bX.altRowTemplate:bX.rowTemplate)(bQ);
bT.replaceWith(bY);
bY=bX._items(bW).eq(bM);
var bH=[{dataItem:bQ}];
if(bO){bT=bT.add(bS);
bS=bX._relatedRow(bY)[0];
p(bY[0],bS);
bY=bY.add(bS);
bH.push({dataItem:bQ});
}bX.angular("compile",function(){return{elements:bY.get(),data:bH};
});
bU=bX.options.selectable;
if(bU&&bT.hasClass("k-state-selected")){bX.select(bY);
}bR=bV.children(":not(.k-group-cell,.k-hierarchy-cell)");
bJ=bY.children(":not(.k-group-cell,.k-hierarchy-cell)");
for(bM=0,bP=bX.columns.length;
bM<bP;
bM++){bK=bX.columns[bM];
bI=bJ.eq(bM);
if(bU&&bR.eq(bM).hasClass("k-state-selected")){bI.addClass("k-state-selected");
}if(bK.field===bL.field){l('<span class="k-dirty"/>').prependTo(bI);
}}bX.trigger("itemChange",{item:bY,data:bQ,ns:bv});
}}},_pageable:function(){var bI=this,bJ,bH=bI.options.pageable;
if(bH){bJ=bI.wrapper.children("div.k-grid-pager");
if(!bJ.length){bJ=l('<div class="k-pager-wrap k-grid-pager"/>').appendTo(bI.wrapper);
}if(bI.pager){bI.pager.destroy();
}if(typeof bH==="object"&&bH instanceof aL.ui.Pager){bI.pager=bH;
}else{bI.pager=new aL.ui.Pager(bJ,Z({},bH,{dataSource:bI.dataSource}));
}}},_footer:function(){var bP=this,bH=bP.dataSource.aggregates(),bM="",bJ=bP.footerTemplate,bO=bP.options,bK,bI=bP.footer||bP.wrapper.find(".k-grid-footer");
if(bJ){bM=l(bP._wrapFooter(bJ(bH)));
if(bI.length){var bQ=bM;
bP.angular("cleanup",function(){return{elements:bI.get()};
});
bI.replaceWith(bQ);
bI=bP.footer=bQ;
}else{if(bO.scrollable){bI=bP.footer=bO.pageable?bM.insertBefore(bP.wrapper.children("div.k-grid-pager")):bM.appendTo(bP.wrapper);
}else{bI=bP.footer=bM.insertBefore(bP.tbody);
}}bP.angular("compile",function(){return{elements:bI.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:aQ(bP.columns,function(bR){return{column:bR,aggregate:bH[bR.field]};
})};
});
}else{if(bI&&!bP.footer){bP.footer=bI;
}}if(bI.length){if(bO.scrollable){bK=bI.attr("tabindex",-1).children(".k-grid-footer-wrap");
bP.scrollables=bP.scrollables.filter(function(){return !l(this).is(".k-grid-footer-wrap");
}).add(bK);
}if(bP._footerWidth){bI.find("table").css("width",bP._footerWidth);
}if(bK){var bN=bP.content.scrollLeft();
var bL=bO.scrollable!==true&&bO.scrollable.virtual&&!bP.virtualScrollable;
if(bL){bN=bP.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft();
}bK.scrollLeft(bN);
}}if(bP.lockedContent){bP._appendLockedColumnFooter();
bP._applyLockedContainersWidth();
bP._syncLockedFooterHeight();
}},_wrapFooter:function(bH){var bK=this,bI="",bJ=!aL.support.mobileOS?aL.support.scrollbar():0;
if(bK.options.scrollable){bI=l('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(aE?' cellspacing="0"':"")+"><tbody>"+bH+"</tbody></table></div></div>");
bK._appendCols(bI.find("table"));
bI.css(aJ?"padding-left":"padding-right",bJ);
return bI;
}return'<tfoot class="k-grid-footer">'+bH+"</tfoot>";
},_columnMenu:function(){var bY=this,bU,bN=aN(bY.columns),bL,bW=bY.options,bM=bW.columnMenu,bV,bX,bO,bJ,bP=an(bY.columns,function(bZ){return bZ.columns!==bw;
}).length>0,bS=this._isMobile,bR=function(bZ){bY.trigger(z,{field:bZ.field,container:bZ.container});
},bK=function(bZ){ai(bZ.closest("table"),true);
},bH=bW.$angular;
if(bM){if(typeof bM=="boolean"){bM={};
}bJ=aO(bY.thead);
for(var bQ=0,bT=bJ.length;
bQ<bT;
bQ++){bL=bN[bQ];
var bI=bJ.eq(bQ);
if(!bL.command&&(bL.field||bI.attr("data-"+aL.ns+"field"))){bU=bI.data("kendoColumnMenu");
if(bU){bU.destroy();
}bX=bL.sortable!==false&&bM.sortable!==false&&bW.sortable!==false?Z({},bW.sortable,{compare:(bL.sortable||{}).compare}):false;
bO=bW.filterable&&bL.filterable!==false&&bM.filterable!==false?Z({pane:bY.pane},bW.filterable,bL.filterable):false;
if(bL.filterable&&bL.filterable.dataSource){bO.forceUnique=false;
bO.checkSource=bL.filterable.dataSource;
}if(bO){bO.format=bL.format;
}bV={dataSource:bY.dataSource,values:bL.values,columns:bM.columns,sortable:bX,filterable:bO,messages:bM.messages,owner:bY,closeCallback:bK,init:bR,pane:bY.pane,filter:bS?":not(.k-column-active)":"",lockedColumns:!bP&&bL.lockable!==false&&aP(bN).length>0};
if(bH){bV.$angular=bH;
}bI.kendoColumnMenu(bV);
}}}},_headerCells:function(){return this.thead.find("th").filter(function(){var bH=l(this);
return !bH.hasClass("k-group-cell")&&!bH.hasClass("k-hierarchy-cell");
});
},_filterable:function(){var bS=this,bL=aN(bS.columns),bO,bI,bH,bN=function(bT){bS.trigger(aa,{field:bT.field,container:bT.container});
},bJ=function(bT){ai(bT.closest("table"),true);
},bM=bS.options.filterable;
if(bM&&typeof bM.mode==bm&&bM.mode.indexOf("menu")==-1){bM=false;
}if(bM&&!bS.options.columnMenu){bI=aO(bS.thead);
for(var bP=0,bQ=bI.length;
bP<bQ;
bP++){bH=bI.eq(bP);
if(bL[bP].filterable!==false&&!bL[bP].command&&(bL[bP].field||bH.attr("data-"+aL.ns+"field"))){bO=bH.data("kendoFilterMenu");
if(bO){bO.destroy();
}bO=bH.data("kendoFilterMultiCheck");
if(bO){bO.destroy();
}var bK=bL[bP].filterable;
var bR=Z({},bM,bK,{dataSource:bS.dataSource,values:bL[bP].values,format:bL[bP].format,closeCallback:bJ,title:bL[bP].title||bL[bP].field,init:bN,pane:bS.pane});
if(bK&&bK.messages){bR.messages=Z(true,{},bM.messages,bK.messages);
}if(bK&&bK.dataSource){bR.forceUnique=false;
bR.checkSource=bK.dataSource;
}if(bK&&bK.multi){bH.kendoFilterMultiCheck(bR);
}else{bH.kendoFilterMenu(bR);
}}}}},_filterRow:function(){var bV=this;
if(!bV._hasFilterRow()){return;
}var bS;
var bH=bV.options.$angular;
var bK=aN(bV.columns),bN=bV.options.filterable,bR=bV.thead.find(".k-filter-row");
this._updateHeader(this.dataSource.group().length);
for(var bO=0;
bO<bK.length;
bO++){var bT,bJ=bK[bO],bQ=bV.options.filterable.operators,bL=false,bU=l("<th/>"),bM=bJ.field;
if(bJ.hidden){bU.hide();
}bR.append(bU);
if(bM&&bJ.filterable!==false){var bI=bJ.filterable&&bJ.filterable.cell||{};
bT=bV.options.dataSource;
if(bT instanceof P){bT=bV.options.dataSource.options;
}var bP=Z(true,{},bN.messages);
if(bJ.filterable){Z(true,bP,bJ.filterable.messages);
}if(bI.enabled===false){bU.html("&nbsp;");
continue;
}if(bI.dataSource){bT=bI.dataSource;
bL=true;
}if(bJ.filterable&&bJ.filterable.operators){bQ=bJ.filterable.operators;
}bS={column:bJ,dataSource:bV.dataSource,suggestDataSource:bT,customDataSource:bL,field:bM,messages:bP,values:bJ.values,template:bI.template,delay:bI.delay,inputWidth:bI.inputWidth,suggestionOperator:bI.suggestionOperator,minLength:bI.minLength,dataTextField:bI.dataTextField,operator:bI.operator,operators:bQ,showOperators:bI.showOperators};
if(bH){bS.$angular=bH;
}l("<span/>").attr(aL.attr("field"),bM).appendTo(bU).kendoFilterCell(bS);
}else{bU.html("&nbsp;");
}}},_sortable:function(){var bP=this,bK=aN(bP.columns),bJ,bO,bH,bN=bP.options.sortable;
if(bN){var bI=aO(bP.thead);
for(var bL=0,bM=bI.length;
bL<bM;
bL++){bJ=bK[bL];
if(bJ.sortable!==false&&!bJ.command&&bJ.field){bH=bI.eq(bL);
bO=bH.data("kendoColumnSorter");
if(bO){bO.destroy();
}bH.attr("data-"+aL.ns+"field",bJ.field).kendoColumnSorter(Z({},bN,bJ.sortable,{dataSource:bP.dataSource,aria:true,filter:":not(.k-column-active)"}));
}}bI=null;
}},_columns:function(bI){var bO=this,bN=bO.table,bK,bH=bN.find("col"),bM,bJ=bO.options.dataSource;
bI=bI.length?bI:aQ(bN.find("th"),function(bV,bS){bV=l(bV);
var bU=bV.attr(aL.attr("sortable")),bQ=bV.attr(aL.attr("filterable")),bX=bV.attr(aL.attr("type")),bR=bV.attr(aL.attr("groupable")),bP=bV.attr(aL.attr("field")),bW=bV.attr(aL.attr("title")),bT=bV.attr(aL.attr("menu"));
if(!bP){bP=bV.text().replace(/\s|[^A-z0-9]/g,"");
}return{field:bP,type:bX,title:bW,sortable:bU!=="false",filterable:bQ!=="false",groupable:bR!=="false",menu:bT,template:bV.attr(aL.attr("template")),width:bH.eq(bS).css("width")};
});
bK=!(bO.table.find("tbody tr").length>0&&(!bJ||!bJ.transport));
if(bO.options.scrollable){var bL=bI;
bM=aP(bI);
bI=aZ(bI);
if(bM.length>0&&bI.length===0){throw new Error("There should be at least one non locked column");
}a4(bO.element.find("tr:has(th):first"),bL);
bI=bM.concat(bI);
}bO.columns=a3(bI,bK);
},_groups:function(){var bH=this.dataSource.group();
return bH?bH.length:0;
},_tmpl:function(bP,bK,bH,bR){var bU=this,bQ=Z({},aL.Template,bU.options.templateSettings),bN,bO=bK.length,bT,bS={storage:{},count:0},bJ,bV,bM=bU._hasDetails(),bI=[],bL=bU._groups();
if(!bP){bP="<tr";
if(bH){bI.push("k-alt");
}if(bM){bI.push("k-master-row");
}if(bI.length){bP+=' class="'+bI.join(" ")+'"';
}if(bO){bP+=" "+aL.attr("uid")+'="#='+aL.expr("uid",bQ.paramName)+'#"';
}bP+=" role='row'>";
if(bL>0&&!bR){bP+=ap(bL);
}if(bM){bP+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>';
}for(bN=0;
bN<bO;
bN++){bJ=bK[bN];
bT=bJ.template;
bV=typeof bT;
bP+="<td"+bn(bJ.attributes)+" role='gridcell'>";
bP+=bU._cellTmpl(bJ,bS);
bP+="</td>";
}bP+="</tr>";
}bP=aL.template(bP,bQ);
if(bS.count>0){return a8(bP,bS.storage);
}return bP;
},_headerCellText:function(bH){var bL=this,bI=Z({},aL.Template,bL.options.templateSettings),bJ=bH.headerTemplate,bM=typeof bJ,bK=bH.title||bH.field||"";
if(bM===al){bK=aL.template(bJ,bI)({});
}else{if(bM===bm){bK=bJ;
}}return bK;
},_cellTmpl:function(bH,bQ){var bS=this,bP=Z({},aL.Template,bS.options.templateSettings),bR=bH.template,bO=bP.paramName,bJ=bH.field,bL="",bM,bN,bK=bH.format,bT=typeof bR,bI=bH.values;
if(bH.command){if(aA(bH.command)){for(bM=0,bN=bH.command.length;
bM<bN;
bM++){bL+=bS._createButton(bH.command[bM]);
}return bL.replace(bt,"\\#");
}return bS._createButton(bH.command).replace(bt,"\\#");
}if(bT===al){bQ.storage["tmpl"+bQ.count]=bR;
bL+="#=this.tmpl"+bQ.count+"("+bO+")#";
bQ.count++;
}else{if(bT===bm){bL+=bR;
}else{if(bI&&bI.length&&aI(bI[0])&&"value" in bI[0]&&bJ){bL+="#var v ="+aL.stringify(L(bI)).replace(bt,"\\#")+"#";
bL+="#var f = v[";
if(!bP.useWithBlock){bL+=bO+".";
}bL+=bJ+"]#";
bL+="${f != null ? f : ''}";
}else{bL+=bH.encoded?"#:":"#=";
if(bK){bL+='kendo.format("'+bK.replace(ak,"\\$1")+'",';
}if(bJ){bJ=aL.expr(bJ,bO);
bL+=bJ+"==null?'':"+bJ;
}else{bL+="''";
}if(bK){bL+=")";
}bL+="#";
}}}return bL;
},_templates:function(){var bP=this,bO=bP.options,bL=bP.dataSource,bN=bL.group(),bM=bP.footer||bP.wrapper.find(".k-grid-footer"),bH=bL.aggregate(),bI=aN(bP.columns),bK=aN(aP(bP.columns)),bJ=bO.scrollable?aN(aZ(bP.columns)):bI;
if(bO.scrollable&&bK.length){if(bO.rowTemplate||bO.altRowTemplate){throw new Error("Having both row template and locked columns is not supported");
}bP.rowTemplate=bP._tmpl(bO.rowTemplate,bJ,false,true);
bP.altRowTemplate=bP._tmpl(bO.altRowTemplate||bO.rowTemplate,bJ,true,true);
bP.lockedRowTemplate=bP._tmpl(bO.rowTemplate,bK);
bP.lockedAltRowTemplate=bP._tmpl(bO.altRowTemplate||bO.rowTemplate,bK,true);
}else{bP.rowTemplate=bP._tmpl(bO.rowTemplate,bJ);
bP.altRowTemplate=bP._tmpl(bO.altRowTemplate||bO.rowTemplate,bJ,true);
}if(bP._hasDetails()){bP.detailTemplate=bP._detailTmpl(bO.detailTemplate||"");
}if(bP._group&&!aC(bH)||!aC(bH)&&!bM.length||an(bI,function(bQ){return bQ.footerTemplate;
}).length){bP.footerTemplate=bP._footerTmpl(bI,bH,"footerTemplate","k-footer-template");
}if(bN&&an(bI,function(bQ){return bQ.groupFooterTemplate;
}).length){bH=l.map(bN,function(bQ){return bQ.aggregates;
});
bP.groupFooterTemplate=bP._footerTmpl(bJ,bH,"groupFooterTemplate","k-group-footer",bK.length);
if(bO.scrollable&&bK.length){bP.lockedGroupFooterTemplate=bP._footerTmpl(bK,bH,"groupFooterTemplate","k-group-footer");
}}if(bP.options.noRecords){bP.noRecordsTemplate=bP._noRecordsTmpl();
}},_noRecordsTmpl:function(){var bQ='<div class="{0}">{1}</div>';
var bH='<div class="k-grid-norecords-template"{1}>{0}</div>';
var bK=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";
var bM={storage:{},count:0};
var bL=l.extend({},aL.Template,this.options.templateSettings);
var bJ=bL.paramName;
var bN;
var bI="";
var bP;
var bO;
if(this.options.noRecords.template){bN=this.options.noRecords.template;
}else{bN=aL.format(bH,this.options.messages.noRecords,bK);
}bP=typeof bN;
if(bP==="function"){bM.storage["tmpl"+bM.count]=bN;
bI+="#=this.tmpl"+bM.count+"("+bJ+")#";
bM.count++;
}else{if(bP==="string"){bI+=bN;
}}bO=aL.template(aL.format(bQ,a1,bI),bL);
if(bM.count>0){bO=l.proxy(bO,bM.storage);
}return bO;
},_footerTmpl:function(bJ,bH,bX,bR,bU){var bY=this,bT=Z({},aL.Template,bY.options.templateSettings),bQ=bT.paramName,bN="",bO,bP,bW,bZ,bV={},bK=0,bS={},bM=bY._groups(),bL=bY.dataSource._emptyAggregates(bH),bI;
bN+='<tr class="'+bR+'">';
if(bM>0&&!bU){bN+=ap(bM);
}if(bY._hasDetails()){bN+='<td class="k-hierarchy-cell">&nbsp;</td>';
}for(bO=0,bP=bJ.length;
bO<bP;
bO++){bI=bJ[bO];
bW=bI[bX];
bZ=typeof bW;
bN+="<td"+bn(bI.footerAttributes)+">";
if(bW){if(bZ!==al){bS=bL[bI.field]?Z({},bT,{paramName:bQ+"['"+bI.field+"']"}):{};
bW=aL.template(bW,bS);
}bV["tmpl"+bK]=bW;
bN+="#=this.tmpl"+bK+"("+bQ+")#";
bK++;
}else{bN+="&nbsp;";
}bN+="</td>";
}bN+="</tr>";
bN=aL.template(bN,bT);
if(bK>0){return a8(bN,bV);
}return bN;
},_detailTmpl:function(bM){var bP=this,bJ="",bL=Z({},aL.Template,bP.options.templateSettings),bK=bL.paramName,bO={},bN=0,bI=bP._groups(),bH=bB(aN(bP.columns)).length,bQ=typeof bM;
bJ+='<tr class="k-detail-row">';
if(bI>0){bJ+=ap(bI);
}bJ+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(bH?' colspan="'+bH+'"':"")+">";
if(bQ===al){bO["tmpl"+bN]=bM;
bJ+="#=this.tmpl"+bN+"("+bK+")#";
bN++;
}else{bJ+=bM;
}bJ+="</td></tr>";
bJ=aL.template(bJ,bL);
if(bN>0){return a8(bJ,bO);
}return bJ;
},_hasDetails:function(){var bH=this;
return bH.options.detailTemplate!==null||(bH._events[V]||[]).length;
},_hasFilterRow:function(){var bJ=this.options.filterable;
var bK=bJ&&typeof bJ.mode==bm&&bJ.mode.indexOf("row")!=-1;
var bH=this.columns;
var bI=l.grep(bH,function(bL){return bL.filterable===false;
});
if(bH.length&&bI.length==bH.length){bK=false;
}return bK;
},_details:function(){var bH=this;
if(bH.options.scrollable&&bH._hasDetails()&&aP(bH.columns).length){throw new Error("Having both detail template and locked columns is not supported");
}bH.table.on(w+a5,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(bM){var bI=l(this),bN=bI.hasClass("k-plus"),bP=bI.closest("tr.k-master-row"),bK,bL=bH.detailTemplate,bJ,bO=bH._hasDetails();
bI.toggleClass("k-plus",!bN).toggleClass("k-minus",bN);
bK=bP.next();
if(bO&&!bK.hasClass("k-detail-row")){bJ=bH.dataItem(bP);
bK=l(bL(bJ)).addClass(bP.hasClass("k-alt")?"k-alt":"").insertAfter(bP);
bH.angular("compile",function(){return{elements:bK.get(),data:[{dataItem:bJ}]};
});
bH.trigger(V,{masterRow:bP,detailRow:bK,data:bJ,detailCell:bK.find(".k-detail-cell")});
}bH.trigger(bN?U:T,{masterRow:bP,detailRow:bK});
bK.toggle(bN);
if(bH._current){bH._current.attr("aria-expanded",bN);
}bM.preventDefault();
return false;
});
},dataItem:function(bM){bM=l(bM)[0];
if(!bM){return null;
}var bL=this.tbody.children(),bH=/k-grouping-row|k-detail-row|k-group-footer/,bJ=bM.sectionRowIndex,bK,bI;
bI=bJ;
for(bK=0;
bK<bJ;
bK++){if(bH.test(bL[bK].className)){bI--;
}}return this._data[bI];
},expandRow:function(bH){l(bH).find("> td .k-plus, > td .k-i-expand").click();
},collapseRow:function(bH){l(bH).find("> td .k-minus, > td .k-i-collapse").click();
},_createHeaderCells:function(bH,bO){var bR=this,bK,bQ,bP,bJ="",bN,bM=aN(bR.columns),bI;
for(bK=0,bN=bH.length;
bK<bN;
bK++){bQ=bH[bK].column||bH[bK];
bP=bR._headerCellText(bQ);
bI="";
var bL=az(bQ,bM);
if(!bQ.command){if(bQ.field){bI=aL.attr("field")+"='"+bQ.field+"' ";
}bJ+="<th scope='col' role='columnheader' "+bI;
if(bO&&!bH[bK].colSpan){bJ+=" rowspan='"+bO+"'";
}if(bH[bK].colSpan>1){bJ+='colspan="'+(bH[bK].colSpan-ax(bQ.columns))+'" ';
bJ+=aL.attr("colspan")+"='"+bH[bK].colSpan+"'";
}if(bQ.title){bJ+=aL.attr("title")+'="'+bQ.title.replace('"',"&quot;").replace(/'/g,"'")+'" ';
}if(bQ.groupable!==bw){bJ+=aL.attr("groupable")+"='"+bQ.groupable+"' ";
}if(bQ.aggregates&&bQ.aggregates.length){bJ+=aL.attr("aggregates")+"='"+bQ.aggregates+"'";
}if(bL>-1){bJ+=aL.attr("index")+"='"+bL+"'";
}bJ+=bn(bQ.headerAttributes);
bJ+=">"+bP+"</th>";
}else{bJ+="<th scope='col'"+bn(bQ.headerAttributes);
if(bO&&!bH[bK].colSpan){bJ+=" rowspan='"+bO+"'";
}if(bL>-1){bJ+=aL.attr("index")+"='"+bL+"'";
}bJ+=">"+bP+"</th>";
}}return bJ;
},_appendLockedColumnContent:function(){var bL=this.columns,bN,bH=this.table.find("colgroup"),bJ=bH.find("col:not(.k-group-col,.k-hierarchy-col)"),bO,bP=l(),bQ=0,bM,bK,bR,bI=0;
for(bN=0,bO=bL.length;
bN<bO;
bN++){if(bL[bN].locked){if(aK(bL[bN])){bK=1;
if(bL[bN].columns){bK=aN(bL[bN].columns).length-ax(bL[bN].columns);
}bK=bK||1;
for(bR=0;
bR<bK;
bR++){bP=bP.add(bJ.eq(bN+bI+bR-bQ));
}bI+=bK-1;
}else{bQ++;
}}}bM=l('<div class="k-grid-content-locked"><table'+(aE?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");
bH.detach();
bM.find("colgroup").append(bP);
bH.insertBefore(this.table.find("tbody"));
this.lockedContent=bM.insertBefore(this.content);
this.lockedTable=bM.children("table");
},_appendLockedColumnFooter:function(){var bQ=this;
var bJ=bQ.footer;
var bH=bJ.find(".k-footer-template>td");
var bI=bJ.find(".k-grid-footer-wrap>table>colgroup>col");
var bL=l('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');
var bM,bN;
var bK=bQ._groups();
var bO=l(),bP=l();
bO=bO.add(bH.filter(".k-group-cell"));
for(bM=0,bN=aN(aP(bQ.columns)).length;
bM<bN;
bM++){bO=bO.add(bH.eq(bM+bK));
}bP=bP.add(bI.filter(".k-group-col"));
for(bM=0,bN=bB(aN(bD(bQ.columns))).length;
bM<bN;
bM++){bP=bP.add(bI.eq(bM+bK));
}bO.appendTo(bL.find("tr"));
bP.appendTo(bL.find("colgroup"));
bQ.lockedFooter=bL.prependTo(bJ);
},_appendLockedColumnHeader:function(bO){var b4=this,bN=this.columns,bW,bV,bZ,bJ,b5,b6,b3,bU,bQ,b0=[],b1=0,bL=l(),bT=b4._hasFilterRow(),bR=0,bS=l(),bH,bY=0,bI=l();
bJ=b4.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");
bU=b4.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");
bQ=b4.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bK=0;
for(bW=0,bZ=bN.length;
bW<bZ;
bW++){if(bN[bW].locked){bH=bU.eq(bW);
bY=aN(bN[bW].columns||[]).length;
if(aK(bN[bW])){var bM=null;
if(bN[bW].columns){bM=bY-ax(bN[bW].columns);
}bM=bM||1;
for(var b2=0;
b2<bM;
b2++){bL=bL.add(bJ.eq(bW+bK+b2-b1));
}bK+=bM-1;
}aR([bN[bW]],v(bH),b0,0,0);
bY=bY||1;
for(var bX=0;
bX<bY;
bX++){bS=bS.add(bQ.eq(bR+bX));
}bR+=bY;
}if(bN[bW].columns){b1+=ax(bN[bW].columns);
}if(!aK(bN[bW])){b1++;
}}if(b0.length){bV='<div class="k-grid-header-locked" style="width:1px"><table'+(aE?' cellspacing="0"':"")+"><colgroup/><thead>";
bV+=new Array(b0.length+1).join("<tr></tr>");
bV+=(bT?'<tr class="k-filter-row" />':"")+"</thead></table></div>";
b3=l(bV);
bJ=b3.find("colgroup");
bJ.append(b4.thead.prev().find("col.k-group-col").add(bL));
b5=b3.find("thead tr:not(.k-filter-row)");
for(bW=0,bZ=b0.length;
bW<bZ;
bW++){bI=bu(b0[bW]);
b5.eq(bW).append(b4.thead.find("tr:eq("+bW+") .k-group-cell").add(bI));
}var bP=bb(this.thead);
if(b0.length<bP){bd(b3,bP-b0.length);
}b6=b3.find(".k-filter-row");
b6.append(b4.thead.find(".k-filter-row .k-group-cell").add(bS));
this.lockedHeader=b3.prependTo(bO);
this.thead.find(".k-group-cell").remove();
return true;
}return false;
},_removeLockedContainers:function(){var bH=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);
aL.destroy(bH);
bH.off(a5).remove();
this.lockedHeader=this.lockedContent=this.lockedFooter=null;
this.selectable=null;
},_thead:function(){var bS=this,bH=bS.columns,bK=bS._hasDetails()&&bH.length,bL=bS._hasFilterRow(),bP,bO="",bT=bS.table.find(">thead"),bN=bS.element.find("thead:first").length>0,bU;
if(!bT.length){bT=l("<thead/>").insertBefore(bS.tbody);
}if(bS.lockedHeader&&bS.thead){bU=bS.thead.find("tr:has(th):not(.k-filter-row)").html("");
bU.remove();
bU=l();
bS._removeLockedContainers();
}else{if(bN){bU=bS.element.find("thead:first tr:has(th):not(.k-filter-row)");
}else{bU=bS.element.find("tr:has(th):first");
}}if(!bU.length){bU=bT.children().first();
if(!bU.length){var bQ=[{rowSpan:1,cells:[],index:0}];
bS._prepareColumns(bQ,bH);
for(bP=0;
bP<bQ.length;
bP++){bO+="<tr>";
if(bK){bO+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';
}bO+=bS._createHeaderCells(bQ[bP].cells,bQ[bP].rowSpan);
bO+="</tr>";
}bU=l(bO);
}}if(bL){var bJ=l("<tr/>");
bJ.addClass("k-filter-row");
if(bK||bU.find(".k-hierarchy-cell").length){bJ.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');
}var bI=(bS.thead||bT).find(".k-filter-row");
if(bI.length){aL.destroy(bI);
bI.remove();
}bT.append(bJ);
}if(!bU.children().length){bO="";
if(bK){bO+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';
}bO+=bS._createHeaderCells(bH);
bU.html(bO);
}else{if(bK&&!bU.find(".k-hierarchy-cell")[0]){bU.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');
}}bU.attr("role","row").find("th").addClass("k-header");
if(!bS.options.scrollable){bT.addClass("k-grid-header");
}bU.find("script").remove().end().prependTo(bT);
if(bS.thead){bS._destroyColumnAttachments();
}this.angular("cleanup",function(){return{elements:bT.find("th").get()};
});
this.angular("compile",function(){return{elements:bT.find("th").get(),data:aQ(bH,function(bV){return{column:bV};
})};
});
bS.thead=bT.attr("role","rowgroup");
bS._sortable();
bS._filterable();
bS._filterRow();
bS._scrollable();
bS._updateCols();
bS._columnMenu();
var bR;
var bM=this.options.scrollable&&aP(this.columns).length;
if(bM){bR=bS._appendLockedColumnHeader(bS.thead.closest(".k-grid-header"));
bS._appendLockedColumnContent();
bS.lockedContent.bind("DOMMouseScroll"+a5+" mousewheel"+a5,a8(bS._wheelScroll,bS));
}bS._updateColumnCellIndex();
bS._updateFirstColumnClass();
bS._resizable();
bS._draggable();
bS._reorderable();
bS._updateHeader(bS._groups());
if(bM){if(bR){bS._syncLockedHeaderHeight();
}bS._applyLockedContainersWidth();
}if(bS.groupable){bS._attachGroupable();
}},_retrieveFirstColumn:function(bI,bK){var bJ=l();
if(bK.length&&bI[0]){var bH=bI[0];
while(bH.columns&&bH.columns.length){bH=bH.columns[0];
bK=bK.filter(":not(:first())");
}bJ=bJ.add(bK);
}return bJ;
},_updateFirstColumnClass:function(){var bK=this,bH=bK.columns||[],bI=bK._hasDetails()&&bH.length;
if(!bI&&!bK._groups()){var bL=bK.thead.find(">tr:not(.k-filter-row):not(:first)");
bH=aZ(bH);
var bJ=bK._retrieveFirstColumn(bH,bL);
if(bK._isLocked()){bL=bK.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");
bH=aP(bK.columns);
bJ=bJ.add(bK._retrieveFirstColumn(bH,bL));
}bJ.each(function(){var bM=l(this).find("th");
bM.removeClass("k-first");
bM.eq(0).addClass("k-first");
});
}},_prepareColumns:function(bO,bJ,bL,bM){var bN=bM||bO[bO.length-1];
var bI=bO[bN.index+1];
var bP=0;
for(var bK=0;
bK<bJ.length;
bK++){var bH={column:bJ[bK],colSpan:0};
bN.cells.push(bH);
if(bJ[bK].columns&&bJ[bK].columns.length){if(!bI){bI={rowSpan:0,cells:[],index:bO.length};
bO.push(bI);
}bH.colSpan=bJ[bK].columns.length;
this._prepareColumns(bO,bJ[bK].columns,bH,bI);
bP+=bH.colSpan-1;
bN.rowSpan=bO.length-bN.index;
}}if(bL){bL.colSpan+=bP;
}},_wheelScroll:function(bJ){if(bJ.ctrlKey){return;
}var bH=this.content;
if(this.options.scrollable.virtual){bH=this.virtualScrollable.verticalScrollbar;
}var bK=bH.scrollTop(),bI=aL.wheelDeltaY(bJ);
if(bI){bJ.preventDefault();
l(bJ.currentTarget).one("wheel"+a5,false);
bH.scrollTop(bK+-bI);
}},_isLocked:function(){return this.lockedHeader!=null;
},_updateHeaderCols:function(){var bH=this.thead.parent().add(this.table);
if(this._isLocked()){a2(bH,bC(bE(this.columns)),this._hasDetails(),0);
}else{a2(bH,bC(bB(this.columns)),this._hasDetails(),0);
}},_updateCols:function(bH){bH=bH||this.thead.parent().add(this.table);
this._appendCols(bH,this._isLocked());
},_updateLockedCols:function(bH){if(this._isLocked()){bH=bH||this.lockedHeader.find("table").add(this.lockedTable);
a2(bH,bC(bD(this.columns)),this._hasDetails(),this._groups());
}},_appendCols:function(bI,bH){if(bH){a2(bI,bC(bE(this.columns)),this._hasDetails(),0);
}else{a2(bI,bC(bB(this.columns)),this._hasDetails(),this._groups());
}},_autoColumns:function(bJ){if(bJ&&bJ.toJSON){var bK=this,bI,bH;
bJ=bJ.toJSON();
bH=!(bK.table.find("tbody tr").length>0&&(!bK.dataSource||!bK.dataSource.transport));
for(bI in bJ){bK.columns.push({field:bI,encoded:bH,headerAttributes:{id:aL.guid()}});
}bK._thead();
bK._templates();
}},_rowsHtml:function(bI,bN){var bO=this,bJ="",bK,bM=bN.rowTemplate,bH=bN.altRowTemplate,bL;
for(bK=0,bL=bI.length;
bK<bL;
bK++){if(bK%2){bJ+=bH(bI[bK]);
}else{bJ+=bM(bI[bK]);
}bO._data.push(bI[bK]);
}return bJ;
},_groupRowHtml:function(bN,bI,bU,bP,bX,bV){var bZ=this,bR="",bS,bT,bL=bN.field,bJ=an(aN(bZ.columns),function(b0){return b0.field==bL;
})[0]||{},bW=bJ.groupHeaderTemplate,bY=(bJ.title||bL)+": "+aj(bN.value,bJ.format,bJ.values,bJ.encoded),bM=bZ._groupAggregatesDefaultObject||{},bH=Z({},bM,bN.aggregates),bK=Z({},{field:bN.field,value:bN.value,aggregates:bH},bN.aggregates[bN.field]),bO=bX.groupFooterTemplate,bQ=bN.items;
if(bW){bY=typeof bW===al?bW(bK):aL.template(bW)(bK);
}bR+=bP(bI,bU,bY);
if(bN.hasSubgroups){for(bS=0,bT=bQ.length;
bS<bT;
bS++){bR+=bZ._groupRowHtml(bQ[bS],bV?bI:bI-1,bU+1,bP,bX,bV);
}}else{bR+=bZ._rowsHtml(bQ,bX);
}if(bO){bR+=bO(bH);
}return bR;
},collapseGroup:function(bI){bI=l(bI);
var bM,bJ=this.options.groupable,bP=bJ.showFooter,bH=bP?0:1,bN,bO=l(),bK,bL,bR;
if(this._isLocked()){if(!bI.closest("div").hasClass("k-grid-content-locked")){bO=bI.nextAll("tr");
bI=this.lockedTable.find(">tbody>tr:eq("+bI.index()+")");
}else{bO=this.tbody.children("tr:eq("+bI.index()+")").nextAll("tr");
}}bM=bI.find(".k-group-cell").length;
bI.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");
bI.find("td[aria-expanded='true']:first").attr("aria-expanded",false);
bI=bI.nextAll("tr");
var bQ=[];
for(bK=0,bL=bI.length;
bK<bL;
bK++){bR=bI.eq(bK);
bN=bR.find(".k-group-cell").length;
if(bR.hasClass("k-grouping-row")){bH++;
}else{if(bR.hasClass("k-group-footer")){bH--;
}}if(bN<=bM||bR.hasClass("k-group-footer")&&bH<0){break;
}if(bO.length){bQ.push(bO[bK]);
}bQ.push(bR[0]);
}l(bQ).hide();
},expandGroup:function(bI){bI=l(bI);
var bQ=this,bP=bQ.options.groupable.showFooter,bM,bR,bN,bO=l(),bK,bL,bH=[],bJ=1;
if(this._isLocked()){if(!bI.closest("div").hasClass("k-grid-content-locked")){bO=bI.nextAll("tr");
bI=this.lockedTable.find(">tbody>tr:eq("+bI.index()+")");
}else{bO=this.tbody.children("tr:eq("+bI.index()+")").nextAll("tr");
}}bM=bI.find(".k-group-cell").length;
bI.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");
bI.find("td[aria-expanded='false']:first").attr("aria-expanded",true);
bI=bI.nextAll("tr");
for(bK=0,bL=bI.length;
bK<bL;
bK++){bR=bI.eq(bK);
bN=bR.find(".k-group-cell").length;
if(bN<=bM){break;
}if(bN==bM+1&&!bR.hasClass("k-detail-row")){bR.show();
bO.eq(bK).show();
if(bR.hasClass("k-grouping-row")&&bR.find(".k-icon").hasClass("k-i-collapse")){bQ.expandGroup(bR);
}if(bR.hasClass("k-master-row")&&bR.find(".k-icon").hasClass("k-minus")){bR.next().show();
bO.eq(bK+1).show();
}}if(bR.hasClass("k-grouping-row")){if(bP){bH.push(bR.is(":visible"));
}bJ++;
}if(bR.hasClass("k-group-footer")){if(bP){bR.toggle(bH.pop());
}if(bJ==1){bR.show();
bO.eq(bK).show();
}else{bJ--;
}}}},_updateHeader:function(bJ){var bM=this,bH=bM._isLocked()?bM.lockedHeader.find("thead"):bM.thead,bI=bH.find("tr.k-filter-row").find("th.k-group-cell").length,bK=bH.find("tr:first").find("th.k-group-cell").length,bL=bH.children("tr:not(:first)").filter(function(){return !l(this).children(":visible").length;
});
if(bJ>bK){l(new Array(bJ-bK+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bH.children("tr:not(.k-filter-row)"));
if(bM.element.is(":visible")){bL.find("th.k-group-cell").hide();
}}else{if(bJ<bK){bH.find("tr").each(function(){l(this).find("th.k-group-cell").filter(":eq("+bJ+"),:gt("+bJ+")").remove();
});
}}if(bJ>bI){l(new Array(bJ-bI+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bH.find(".k-filter-row"));
}},_firstDataItem:function(bH,bI){if(bH&&bI){if(bH.hasSubgroups){bH=this._firstDataItem(bH.items[0],bI);
}else{bH=bH.items[0];
}}return bH;
},_updateTablesWidth:function(){var bI=this,bH;
if(!bI._isLocked()){return;
}bH=l(">.k-grid-footer>.k-grid-footer-wrap>table",bI.wrapper).add(bI.thead.parent()).add(bI.table);
bI._footerWidth=br(bH.eq(0));
bH.width(bI._footerWidth);
bH=l(">.k-grid-footer>.k-grid-footer-locked>table",bI.wrapper).add(bI.lockedHeader.find(">table")).add(bI.lockedTable);
bH.width(br(bH.eq(0)));
},hideColumn:function(bJ){var bU=this,bH,bT,bQ,bI,bM,bS,bW=0,bP,bR,bO=bU.footer||bU.wrapper.find(".k-grid-footer"),bL=bU.columns,bV=bU.lockedHeader?aO(bU.lockedHeader.find(">table>thead")).filter(aB).length:0,bK;
if(typeof bJ=="number"){bJ=bL[bJ];
}else{if(aI(bJ)){bJ=an(af(bL),function(bX){return bX===bJ;
})[0];
}else{bJ=an(af(bL),function(bX){return bX.field===bJ;
})[0];
}}if(!bJ||!aK(bJ)){return;
}if(bJ.columns&&bJ.columns.length){bS=I(bJ,bL);
bk(bJ,false);
bj(X(l(">table>thead",bU.lockedHeader),bU.thead,">tr:eq("+bS.row+")>th"),bS.cell,false);
for(bQ=0;
bQ<bJ.columns.length;
bQ++){this.hideColumn(bJ.columns[bQ]);
}bU.trigger(x,{column:bJ});
return;
}bK=az(bJ,bB(aN(bL)));
bk(bJ,false);
bU._setParentsVisibility(bJ,false);
bU._templates();
bU._updateCols();
bU._updateLockedCols();
var bN=bU.thead;
bP=bK;
if(bU.lockedHeader&&bV>bK){bN=bU.lockedHeader.find(">table>thead");
}else{bP-=bV;
}bH=aO(bN).filter(aB).eq(bP);
bH[0].style.display="none";
bj(X(l(">table>thead",bU.lockedHeader),bU.thead,">tr.k-filter-row>th"),bK,false);
if(bO[0]){bU._updateCols(bO.find(">.k-grid-footer-wrap>table"));
bU._updateLockedCols(bO.find(">.k-grid-footer-locked>table"));
bj(bO.find(".k-footer-template>td"),bK,false);
}if(bU.lockedTable&&bV>bK){ay(bU.lockedTable.find(">tbody>tr"),bK);
}else{ay(bU.tbody.children(),bK-bV);
}if(bU.lockedTable){bU._updateTablesWidth();
bU._applyLockedContainersWidth();
bU._syncLockedContentHeight();
bU._syncLockedHeaderHeight();
bU._syncLockedFooterHeight();
}else{bI=bU.thead.prev().find("col");
for(bQ=0,bR=bI.length;
bQ<bR;
bQ+=1){bM=bI[bQ].style.width;
if(bM&&bM.indexOf("%")==-1){bW+=parseInt(bM,10);
}else{bW=0;
break;
}}bT=l(">.k-grid-header table:first,>.k-grid-footer table:first",bU.wrapper).add(bU.table);
bU._footerWidth=null;
if(bW){bT.each(function(){this.style.width=bW+"px";
});
bU._footerWidth=bW;
}if(s.msie&&s.version==8){bT.css("display","inline-table");
setTimeout(function(){bT.css("display","table");
},1);
}}bU._updateFirstColumnClass();
bU.trigger(x,{column:bJ});
},_setParentsVisibility:function(bJ,bQ){var bK=this.columns;
var bL;
var bN=[];
var bM;
var bO;
var bH;
var bI;
var bP=bQ?function(bR){return bB(bR.columns).length&&bR.hidden;
}:function(bR){return !bB(bR.columns).length&&!bR.hidden;
};
if(B(bJ,bK,bN)&&bN.length){for(bL=bN.length-1;
bL>=0;
bL--){bM=bN[bL];
bO=C(bM,bK);
bH=X(l(">table>thead",this.lockedHeader),this.thead,">tr:eq("+bO.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bO.cell);
if(bP(bM)){bk(bM,bQ);
bH[0].style.display=bQ?"":"none";
}if(bH.filter("["+aL.attr("colspan")+"]").length){bI=parseInt(bH.attr(aL.attr("colspan")),10);
bH[0].colSpan=bI-ax(bM.columns)||1;
}}}},showColumn:function(bJ){var bV=this,bQ,bR,bH,bU,bW,bP,bT,bM,bI,bL=bV.columns,bO=bV.footer||bV.wrapper.find(".k-grid-footer"),bS=bV.lockedHeader?aO(bV.lockedHeader.find(">table>thead")).length:0,bK;
if(typeof bJ=="number"){bJ=bL[bJ];
}else{if(aI(bJ)){bJ=an(af(bL),function(bX){return bX===bJ;
})[0];
}else{bJ=an(af(bL),function(bX){return bX.field===bJ;
})[0];
}}if(!bJ||aK(bJ)){return;
}if(bJ.columns&&bJ.columns.length){bT=C(bJ,bL);
bk(bJ,true);
bj(X(l(">table>thead",bV.lockedHeader),bV.thead,">tr:eq("+bT.row+")>th"),bT.cell,true);
for(bQ=0;
bQ<bJ.columns.length;
bQ++){this.showColumn(bJ.columns[bQ]);
}bV.trigger(F,{column:bJ});
return;
}bK=az(bJ,aN(bL));
bk(bJ,true);
bV._setParentsVisibility(bJ,true);
bV._templates();
bV._updateCols();
bV._updateLockedCols();
var bN=bV.thead;
bP=bK;
if(bV.lockedHeader&&bS>bK){bN=bV.lockedHeader.find(">table>thead");
}else{bP-=bS;
}bH=aO(bN).eq(bP);
bH[0].style.display="";
bj(X(l(">table>thead",bV.lockedHeader),bV.thead,">tr.k-filter-row>th"),bK,true);
if(bO[0]){bV._updateCols(bO.find(">.k-grid-footer-wrap>table"));
bV._updateLockedCols(bO.find(">.k-grid-footer-locked>table"));
bj(bO.find(".k-footer-template>td"),bK,true);
}if(bV.lockedTable&&bS>bK){bl(bV.lockedTable.find(">tbody>tr"),bK);
}else{bl(bV.tbody.children(),bK-bS);
}if(bV.lockedTable){bV._updateTablesWidth();
bV._applyLockedContainersWidth();
bV._syncLockedContentHeight();
bV._syncLockedHeaderHeight();
}else{bU=l(">.k-grid-header table:first,>.k-grid-footer table:first",bV.wrapper).add(bV.table);
if(!bJ.width){bU.width("");
}else{bW=0;
bI=bV.thead.prev().find("col");
for(bQ=0,bR=bI.length;
bQ<bR;
bQ+=1){bM=bI[bQ].style.width;
if(bM.indexOf("%")>-1){bW=0;
break;
}bW+=parseInt(bM,10);
}bV._footerWidth=null;
if(bW){bU.each(function(){this.style.width=bW+"px";
});
bV._footerWidth=bW;
}}}bV._updateFirstColumnClass();
bV.trigger(F,{column:bJ});
},_progress:function(bI){var bH=this.element;
if(this.lockedContent){bH=this.wrapper;
}else{if(this.element.is("table")){bH=this.element.parent();
}else{if(this.content&&this.content.length){bH=this.content;
}}}aL.ui.progress(bH,bI);
},_resize:function(bI,bH){this._syncLockedHeaderHeight();
if(this.content){this._setContentWidth();
this._setContentHeight();
}if(this.virtualScrollable&&(bH||this._rowHeight)){if(bH){this._rowHeight=null;
}this.virtualScrollable.repaintScrollbar();
}},_isActiveInTable:function(){var bH=m();
return this.table[0]===bH||l.contains(this.table[0],bH)||this._isLocked()&&(this.lockedTable[0]===bH||l.contains(this.lockedTable[0],bH));
},refresh:function(bL){var bQ=this,bK=bQ.dataSource.view(),bO=bQ.options.navigatable,bJ,bI=l(bQ.current()),bN=false,bM=(bQ.dataSource.group()||[]).length,bP=bQ.content&&bQ.content.scrollLeft(),bH=bM+bC(bB(bQ.columns)).length;
if(bL&&bL.action==="itemchange"&&bQ.editable){return;
}bL=bL||{};
if(bQ.trigger("dataBinding",{action:bL.action||"rebind",index:bL.index,items:bL.items})){return;
}bQ._angularItems("cleanup");
if(bO&&(bQ._isActiveInTable()||bQ._editContainer&&bQ._editContainer.data("kendoWindow"))){bN=bI.is("th");
bJ=Math.max(bQ.cellIndex(bI),0);
}bQ._destroyEditable();
bQ._progress(false);
bQ._hideResizeHandle();
bQ._data=[];
if(!bQ.columns.length){bQ._autoColumns(bQ._firstDataItem(bK[0],bM));
bH=bM+bQ.columns.length;
}bQ._group=bM>0||bQ._group;
if(bQ._group){bQ._templates();
bQ._updateCols();
bQ._updateLockedCols();
bQ._updateHeader(bM);
bQ._group=bM>0;
}bQ._renderContent(bK,bH,bM);
bQ._renderLockedContent(bK,bH,bM);
bQ._footer();
bQ._renderNoRecordsContent();
bQ._setContentHeight();
bQ._setContentWidth(bP);
if(bQ.lockedTable){if(bQ.options.scrollable.virtual){bQ.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");
}else{if(bQ.touchScroller){bQ.touchScroller.movable.trigger("change");
}else{bQ.wrapper.one("scroll",function(bR){bR.stopPropagation();
});
bQ.content.trigger("scroll");
}}}bQ._restoreCurrent(bJ,bN);
if(bQ.touchScroller){bQ.touchScroller.contentResized();
}if(bQ.selectable){bQ.selectable.resetTouchEvents();
}bQ._muteAngularRebind(function(){bQ._angularItems("compile");
});
bQ.trigger(O);
},_restoreCurrent:function(bH,bI){if(bH===bw||bH<0){return;
}this._removeCurrent();
if(bI){this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(bH));
}else{var bK=0;
if(this._rowVirtualIndex){bK=this.virtualScrollable.position(this._rowVirtualIndex);
}else{bH=0;
}var bJ=l();
if(this.lockedTable){bJ=this.lockedTable.find(">tbody>tr").eq(bK);
}bJ=bJ.add(this.tbody.children().eq(bK));
var bL=bJ.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bH);
this._setCurrent(bL);
}if(this._current){ai(this._current.closest("table")[0],true);
}},_angularItems:function(bH){aL.ui.DataBoundWidget.fn._angularItems.call(this,bH);
if(bH==="cleanup"){this._cleanupDetailItems();
}this._angularGroupItems(bH);
this._angularGroupFooterItems(bH);
},_cleanupDetailItems:function(){var bH=this;
if(bH._hasDetails()){bH.angular("cleanup",function(){return{elements:bH.tbody.children(".k-detail-row")};
});
bH.tbody.find(".k-detail-cell").empty();
}},_angularGroupItems:function(bH){var bJ=this,bI=bJ.tbody;
if(bJ.lockedContent){bI=bJ.lockedTable.find("tbody");
}if(bJ._group){bJ.angular(bH,function(){return{elements:bI.children(".k-grouping-row"),data:l.map(au(bJ.dataSource.view()),function(bK){return{dataItem:bK};
})};
});
}},_angularGroupFooterItems:function(bH){var bJ=this,bI=bJ.tbody;
if(bJ.lockedContent){bI=bJ.element;
}if(bJ._group&&bJ.groupFooterTemplate){bJ.angular(bH,function(){return{elements:bI.find(".k-group-footer"),data:l.map(aq(bJ.dataSource.view()),function(bK){return{dataItem:bK};
})};
});
}},_renderContent:function(bI,bH,bJ){var bP=this,bL,bN,bK="",bM=bP.lockedContent!=null,bO={rowTemplate:bP.rowTemplate,altRowTemplate:bP.altRowTemplate,groupFooterTemplate:bP.groupFooterTemplate};
bH=bM?bH-bC(bD(bP.columns)).length:bH;
if(bJ>0){bH=bM?bH-bJ:bH;
if(bP.detailTemplate){bH++;
}if(bP.groupFooterTemplate){bP._groupAggregatesDefaultObject=bP.dataSource.aggregates();
}for(bL=0,bN=bI.length;
bL<bN;
bL++){bK+=bP._groupRowHtml(bI[bL],bH,0,bM?at:ar,bO,bM);
}}else{bK+=bP._rowsHtml(bI,bO);
}bP.tbody=q(bP.tbody,bP.table,bK,this.options.$angular);
},_renderLockedContent:function(bI,bH,bJ){var bK="",bL,bM,bO={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};
if(this.lockedContent){var bN=this.lockedTable;
if(bJ>0){bH=bH-bB(aN(aZ(this.columns))).length;
for(bL=0,bM=bI.length;
bL<bM;
bL++){bK+=this._groupRowHtml(bI[bL],bH,0,ar,bO);
}}else{bK=this._rowsHtml(bI,bO);
}q(bN.children("tbody"),bN,bK,this.options.$angular);
this._syncLockedContentHeight();
}},_adjustRowsHeight:function(bR,bS){var bP=bR[0].rows,bM=bP.length,bL,bQ=bS[0].rows,bH=bR.add(bS),bI=bH.length,bK=[];
for(bL=0;
bL<bM;
bL++){if(!bQ[bL]){break;
}if(bP[bL].style.height){bP[bL].style.height=bQ[bL].style.height="";
}var bN=bP[bL].offsetHeight;
var bO=bQ[bL].offsetHeight;
var bJ=0;
if(bN>bO){bJ=bN;
}else{if(bN<bO){bJ=bO;
}}bK.push(bJ);
}for(bL=0;
bL<bI;
bL++){bH[bL].style.display="none";
}for(bL=0;
bL<bM;
bL++){if(bK[bL]){bP[bL].style.height=bQ[bL].style.height=bK[bL]+1+"px";
}}for(bL=0;
bL<bI;
bL++){bH[bL].style.display="";
}}});
if(aL.ExcelMixin){aL.ExcelMixin.extend(ao.prototype);
}if(aL.PDFMixin){aL.PDFMixin.extend(ao.prototype);
ao.prototype._drawPDF=function(bM){var bO=new l.Deferred();
var bL=this;
var bI=bL.dataSource;
var bH=bL.options.pdf.allPages;
this._initPDFProgress(bM);
var bJ=new aL.drawing.Group();
var bP=bI.page();
function bN(){if(bH&&bP!==bw){bI.unbind("change",bK);
bI.one("change",function(){bO.resolve(bJ);
});
bI.page(bP);
}else{bO.resolve(bJ);
}}function bK(){bL._drawPDFShadow({width:bL.wrapper.width()},{avoidLinks:bL.options.pdf.avoidLinks}).done(function(bR){var bS=bI.page();
var bT=bH?bI.totalPages():1;
var bQ={page:bR,pageNumber:bS,progress:bS/bT,totalPages:bT};
bM.notify(bQ);
bJ.append(bQ.page);
if(bS<bT){bI.page(bS+1);
}else{bN();
}}).fail(function(bQ){bO.reject(bQ);
});
}if(bH){bI.bind("change",bK);
bI.page(1);
}else{bK();
}return bO.promise();
};
ao.prototype._initPDFProgress=function(bH){var bI=l("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");
bI.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));
this.wrapper.append(bI);
var bJ=l("<div class='k-loading-pdf-progress'>").appendTo(bI).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");
bH.progress(function(bK){bJ.value(bK.progress);
}).always(function(){aL.destroy(bI);
bI.remove();
});
};
}function bo(bK,bL){bK=bK[0];
bL=bL[0];
if(bK.rows.length!==bL.rows.length){var bI=bK.offsetHeight;
var bM=bL.offsetHeight;
var bJ;
var bH;
if(bI>bM){bJ=bL.rows[bL.rows.length-1];
if(ab.test(bJ.className)){bJ=bL.rows[bL.rows.length-2];
}bH=bI-bM;
}else{bJ=bK.rows[bK.rows.length-1];
if(ab.test(bJ.className)){bJ=bK.rows[bK.rows.length-2];
}bH=bM-bI;
}bJ.style.height=bJ.offsetHeight+bH+"px";
}}function p(bK,bL){var bH;
var bI=bK.offsetHeight;
var bJ=bL.offsetHeight;
if(bI>bJ){bH=bI+"px";
}else{if(bI<bJ){bH=bJ+"px";
}}if(bH){bK.style.height=bL.style.height=bH;
}}function am(bI,bL){var bJ,bK,bH;
if(typeof bI===bm&&bI===bL){return bI;
}if(aI(bI)&&bI.name===bL){return bI;
}if(aA(bI)){for(bJ=0,bK=bI.length;
bJ<bK;
bJ++){bH=bI[bJ];
if(typeof bH===bm&&bH===bL||bH.name===bL){return bH;
}}}return null;
}function ai(bM,bH){var bJ=s.msie||s.edge;
if(bH===true){bM=l(bM);
var bL,bK;
bL=bM.parent().scrollTop();
bK=bM.parent().scrollLeft();
if(bJ){try{bM[0].setActive();
}catch(bI){bM[0].focus();
}}else{bM[0].focus();
}bM.parent().scrollTop(bL).scrollLeft(bK);
}else{l(bM).one("focusin",function(bN){bN.preventDefault();
}).focus();
}}function aH(bH){return l(bH).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon");
}function bq(bJ){var bI=l(bJ.currentTarget),bL=bI.is("th"),bN=this.table.add(this.lockedTable),bK=this.thead.parent().add(l(">table",this.lockedHeader)),bM=aH(bJ.target),bH=bI.closest("table")[0];
if(aL.support.touch){return;
}if(bM&&bI.find(aL.roleSelector("filtercell")).length){this._setCurrent(bI);
return;
}if(bH!==bN[0]&&bH!==bN[1]&&bH!==bK[0]&&bH!==bK[1]){return;
}if(l(bJ.target).is("a.k-i-collapse, a.k-i-expand")){return;
}if(this.options.navigatable){this._setCurrent(bI);
}if(bL||!bM){setTimeout(function(){if(!(aF&&l(aL._activeElement()).hasClass("k-widget"))){if(!aH(aL._activeElement())){ai(bH,true);
}}});
}if(bL){bJ.preventDefault();
}}function aG(bH){return bH&&(bH.hasClass("k-edit-cell")||bH.parent().hasClass("k-grid-edit-row"));
}function ar(bH,bI,bJ){return'<tr role="row" class="k-grouping-row">'+ap(bI)+'<td colspan="'+bH+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+bJ+"</p></td></tr>";
}function at(bH){return'<tr role="row" class="k-grouping-row"><td colspan="'+bH+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>';
}bv.plugin(ao);
bv.plugin(bA);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(k,l,m){(m||l)();
}));
window.$=h;
window.jQuery=i;
})($telerik.$,$telerik.$);
window.$=c;
window.jQuery=d;
})($telerik.$,$telerik.$);
